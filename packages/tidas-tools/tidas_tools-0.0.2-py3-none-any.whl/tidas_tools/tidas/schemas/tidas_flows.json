{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "flowDataSet": {
      "type": "object",
      "properties": {
        "@xmlns": {
          "type": "string",
          "const": "http://lca.jrc.it/ILCD/Flow"
        },
        "@xmlns:common": {
          "type": "string",
          "const": "http://lca.jrc.it/ILCD/Common"
        },
        "@xmlns:ecn": {
          "type": "string",
          "const": "http://eplca.jrc.ec.europa.eu/ILCD/Extensions/2018/ECNumber"
        },
        "@xmlns:xsi": {
          "type": "string",
          "const": "http://www.w3.org/2001/XMLSchema-instance"
        },
        "@version": {
          "type": "string"
        },
        "@locations": {
          "type": "string",
          "const": "../ILCDLocations.xml"
        },
        "@xsi:schemaLocation": {
          "type": "string",
          "const": "http://lca.jrc.it/ILCD/Flow ../../schemas/ILCD_FlowDataSet.xsd"
        },
        "flowInformation": {
          "type": "object",
          "properties": {
            "dataSetInformation": {
              "type": "object",
              "properties": {
                "common:UUID": {
                  "type": "string",
                  "description": "Automatically generated Universally Unique Identifier of this data set. Together with the \"Data set version\", the UUID uniquely identifies each data set.",
                  "pattern": "^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"
                },
                "name": {
                  "type": "object",
                  "properties": {
                    "baseName": {
                      "$ref": "data_types.json#/$defs/StringMultiLang"
                    },
                    "treatmentStandardsRoutes": {
                      "$ref": "data_types.json#/$defs/StringMultiLang"
                    },
                    "mixAndLocationTypes": {
                      "$ref": "data_types.json#/$defs/StringMultiLang"
                    },
                    "flowProperties": {
                      "$ref": "data_types.json#/$defs/StringMultiLang"
                    }
                  },
                  "required": [
                    "baseName",
                    "treatmentStandardsRoutes",
                    "mixAndLocationTypes",
                    "flowProperties"
                  ]
                },
                "classificationInformation": {
                  "type": "object",
                  "description": "Hierachical classification of the Flow property foreseen to be used to structure the Flow property content of the database. (Note: This entry is NOT required for the identification of the Flow property data set. It should nevertheless be avoided to use identical names for Flow properties in the same class.",
                  "properties": {
                    "common:synonyms": {
                      "$ref": "data_types.json#/$defs/FTMultiLang",
                      "description": "Synonyms / alternative names / brands of the good, service, or process. Separated by semicolon."
                    },
                    "common:elementaryFlowCategorization": {
                      "type": "object",
                      "properties": {
                        "common:category": {
                          "type": "array",
                          "items": [
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["0"]
                                },
                                "@catId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@catId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_elementary_category.json"
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["1"]
                                },
                                "@catId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@catId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_elementary_category.json"
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["2"]
                                },
                                "@catId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@catId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_elementary_category.json"
                                }
                              }
                            }
                          ],
                          "uniqueItems": true,
                          "allOf": [
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "0"
                                  }
                                }
                              }
                            },
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "1"
                                  }
                                }
                              }
                            },
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "2"
                                  }
                                }
                              }
                            }
                          ]
                        }
                      },
                      "required": [
                        "common:category"
                      ]
                    },
                    "common:classification": {
                      "type": "object",
                      "properties": {
                        "common:class": {
                          "type": "array",
                          "items": [
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["0"]
                                },
                                "@classId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@classId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_product_category.json"
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["1"]
                                },
                                "@classId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@classId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_product_category.json"
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["2"]
                                },
                                "@classId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@classId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_product_category.json"
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["3"]
                                },
                                "@classId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@classId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_product_category.json"
                                }
                              }
                            },
                            {
                              "type": "object",
                              "properties": {
                                "@level": {
                                  "type": "string",
                                  "enum": ["4"]
                                },
                                "@classId": {
                                  "type": "string"
                                },
                                "#text": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "@level",
                                "@classId",
                                "#text"
                              ],
                              "dependencies": {
                                "@level": {
                                  "$ref": "./tidas_flows_product_category.json"
                                }
                              }
                            }
                          ],
                          "uniqueItems": true,
                          "allOf": [
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "0"
                                  }
                                }
                              }
                            },
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "1"
                                  }
                                }
                              }
                            },
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "2"
                                  }
                                }
                              }
                            },
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "3"
                                  }
                                }
                              }
                            },
                            {
                              "maxContains": 1,
                              "minContains": 0,
                              "contains": {
                                "properties": {
                                  "@level": {
                                    "const": "4"
                                  }
                                }
                              }
                            }
                          ]
                        }
                      },
                      "required": [
                        "common:class"
                      ]
                    }
                  },
                  "oneOf": [
                    {
                      "required": [
                        "common:elementaryFlowCategorization"
                      ]
                    },
                    {
                      "required": [
                        "common:classification"
                      ]
                    }
                  ]
                },
                "CASNumber": {
                  "type": "string",
                  "pattern": "^[0-9]{2,7}-[0-9]{2}-[0-9]$",
                  "description": "Chemical Abstract Systems Number of the substance. [Note: Should only be given for (virtually) pure substances, but NOT also for the main constituent of a material or product etc.]"
                },
                "sumFormula": {
                  "type": "string",
                  "description": "Chemical sum formula of the substance."
                },
                "common:generalComment": {
                  "$ref": "data_types.json#/$defs/FTMultiLang",
                  "description": "Free text for general information about the Flow data set. It may contain information about e.g. the use of the substance, good, service or process in a specific technology or industry-context, information sources used, data selection principles etc."
                }
              },
              "required": [
                "common:UUID",
                "name",
                "classificationInformation"
              ]
            },
            "quantitativeReference": {
              "type": "object",
              "properties": {
                "referenceToReferenceFlowProperty": {
                  "type": "string",
                  "$ref": "data_types.json#/$defs/Int5"
                }
              },
              "required": [
                "referenceToReferenceFlowProperty"
              ]
            },
            "geography": {
              "type": "object",
              "properties": {
                "locationOfSupply": {
                  "$ref": "tidas_locations_category.json"
                }
              },
              "required": [
                "locationOfSupply"
              ]
            }
          },
          "required": [
            "dataSetInformation",
            "quantitativeReference",
            "geography"
          ]
        },
        "modellingAndValidation": {
          "type": "object",
          "properties": {
            "LCIMethod": {
              "type": "object",
              "properties": {
                "typeOfDataSet": {
                  "type": "string",
                  "enum": [
                    "Elementary flow",
                    "Product flow",
                    "Waste flow"
                  ]
                }
              },
              "required": [
                "typeOfDataSet"
              ]
            },
            "complianceDeclarations": {
              "type": "object",
              "properties": {
                "compliance": {
                  "type": "object",
                  "properties": {
                    "common:referenceToComplianceSystem": {
                      "$ref": "data_types.json#/$defs/GlobalReferenceType"
                    },
                    "common:approvalOfOverallCompliance": {
                      "type": "string",
                      "enum": [
                        "Fully compliant",
                        "Not compliant",
                        "Not defined"
                      ]
                    }
                  },
                  "required": [
                    "common:referenceToComplianceSystem",
                    "common:approvalOfOverallCompliance"
                  ]
                }
              },
              "required": [
                "compliance"
              ]
            }
          },
          "required": [
            "LCIMethod",
            "complianceDeclarations"
          ]
        },
        "administrativeInformation": {
          "type": "object",
          "properties": {
            "dataEntryBy": {
              "type": "object",
              "properties": {
                "common:timeStamp": {
                  "type": "string",
                  "format": "date-time"
                },
                "common:referenceToDataSetFormat": {
                  "$ref": "data_types.json#/$defs/GlobalReferenceType"
                },
                "common:referenceToPersonOrEntityEnteringTheData": {
                  "$ref": "data_types.json#/$defs/GlobalReferenceType"
                }
              },
              "required": [
                "common:timeStamp",
                "common:referenceToDataSetFormat"
              ]
            },
            "publicationAndOwnership": {
              "type": "object",
              "properties": {
                "common:dataSetVersion": {
                  "type": "string"
                },
                "common:referenceToPrecedingDataSetVersion": {
                  "$ref": "data_types.json#/$defs/GlobalReferenceType"
                },
                "permanentDataSetURI": {
                  "type": "string",
                  "format": "uri"
                },
                "common:referenceToOwnershipOfDataSet": {
                  "$ref": "data_types.json#/$defs/GlobalReferenceType"
                }
              },
              "required": [
                "common:dataSetVersion"
              ]
            }
          },
          "required": [
            "dataEntryBy",
            "publicationAndOwnership"
          ]
        },
        "flowProperties": {
          "type": "object",
          "properties": {
            "flowProperty": {
              "type": "object",
              "properties": {
                "@dataSetInternalID": {
                  "type": "string"
                },
                "referenceToFlowPropertyDataSet": {
                  "$ref": "data_types.json#/$defs/GlobalReferenceType"
                },
                "meanValue": {
                  "$ref": "data_types.json#/$defs/Real"
                },
                "minimumValue": {
                  "$ref": "data_types.json#/$defs/Real"
                },
                "maximumValue": {
                  "$ref": "data_types.json#/$defs/Real"
                },
                "uncertaintyDistributionType": {
                  "type": "string",
                  "enum": [
                    "undefined",
                    "log-normal",
                    "normal",
                    "triangular",
                    "uniform"
                  ]
                },
                "relativeStandardDeviation95In":{
                  "type": "number"
                },
                "dataDerivationTypeStatus": {
                  "type": "string",
                  "enum": [
                    "Measured",
                    "Calculated",
                    "Estimated",
                    "Unknown derivation"
                  ]
                },
                "generalComment":{
                  "$ref": "data_types.json#/$defs/StringMultiLang"
                }
              },
              "required": [
                "@dataSetInternalID",
                "referenceToFlowPropertyDataSet",
                "meanValue"
              ]
            }
          },
          "required": [
            "flowProperty"
          ]
        }
      },
      "required": [
        "@xmlns",
        "@xmlns:common",
        "@xmlns:ecn",
        "@xmlns:xsi",
        "@version",
        "@locations",
        "@xsi:schemaLocation",
        "flowInformation",
        "modellingAndValidation",
        "administrativeInformation",
        "flowProperties"
      ]
    }
  },
  "required": [
    "flowDataSet"
  ]
}