(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3422],{15806:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/reporting",function(){return n(11413)}])},43124:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(24246),i=n(96013),s=n(88038),a=n.n(s),o=n(86677);n(27378);var l=n(11596),c=n(72247),d=n(87162),u=()=>{let e=(0,o.useRouter)();return(0,r.jsx)(i.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(i.xuv,{children:[(0,r.jsxs)(i.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(i.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(i.wpx,{onClick:()=>{e.push(d.fz)},children:"Configure"})]}),(0,r.jsxs)(i.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=e=>{let{children:t,title:n,padded:s=!0,mainProps:d}=e,p=(0,l.hz)(),f=(0,o.useRouter)(),g="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,m=!(p.flags.privacyRequestsConfiguration&&g),{data:h}=(0,c.JE)(void 0,{skip:m}),{data:x}=(0,c.PW)(void 0,{skip:m}),y=p.flags.privacyRequestsConfiguration&&(!h||!x)&&g;return(0,r.jsxs)(i.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(a(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(i.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...d,children:[y?(0,r.jsx)(u,{}):null,t]})]})}},37541:function(e,t,n){"use strict";var r=n(24246),i=n(96013),s=n(53614);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:a=!0,children:o,rightContent:l,style:c,...d}=e;return(0,r.jsxs)("div",{...d,style:a?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...c}:{paddingBottom:"24px",...c},children:[(0,r.jsxs)(i.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(i.X6q,{className:n||o?"pb-4":void 0,fontSize:"2xl","data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,r.jsx)(s.m,{className:o?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),o]})}},60136:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},MM:function(){return p},Ot:function(){return c},c6:function(){return i},cj:function(){return g},e$:function(){return o},fn:function(){return l},iC:function(){return f},nU:function(){return u},tB:function(){return d}});var r,i,s=n(41164);let a="An unexpected error occurred. Please try again.",o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n;let t=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null==t?void 0:t.msg,": ").concat(null==t?void 0:t.loc)}if(409===e.status&&(0,s.Dy)(e.data)||404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function l(e){return"object"==typeof e&&null!=e&&"status"in e}function c(e){return"object"==typeof e&&null!=e&&"data"in e&&"string"==typeof e.data.detail}function d(e){return"object"==typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:a};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){let{status:n}=e;return{status:n,message:o(e,t.message)}}return t},p=e=>Object.entries(e).map(e=>({value:e[1],label:e[1]}));(r=i||(i={})).GVL="gvl",r.AC="gacp",r.COMPASS="compass";let f={gvl:{label:"GVL",fullName:"Global Vendor List"},gacp:{label:"AC",fullName:"Google Additional Consent List"},compass:{label:"",fullName:""}},g=e=>{let t=e.split(".")[0];return"gacp"===t?"gacp":"gvl"===t?"gvl":"compass"}},53614:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var r=n(24246),i=n(96013),s=n(79894),a=n.n(s),o=n(27378);let{Text:l}=i.AntTypography,c=e=>{let{items:t,...n}=e,s=(0,o.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let s=n===t.length-1,o={...e},c=o.onClick&&!o.href;return("string"==typeof o.title&&(o.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,children:o.title})),c)?o.title=(0,r.jsx)(i.wpx,{type:"text",size:"small",icon:o.icon,onClick:o.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:o.title}):(o.icon&&(o.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:o.icon}),o.title]})),o.href&&o.title&&(o.title=(0,r.jsx)(a(),{href:o.href,className:"ant-breadcrumb-link",children:o.title}),delete o.href)),o}),[t]);return(0,r.jsx)(i.zrq,{items:s,...n})}},11413:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(24246),i=n(96013),s=n(27378),a=n(43124),o=n(37541),l=n(60136);let{useLazyDownloadReportQuery:c}=n(21618).u.injectEndpoints({endpoints:e=>({downloadReport:e.query({query:e=>{let{startDate:t,endDate:n}=e;return{url:"plus/consent_reporting",params:{...function(e){let t,n,{startDate:r,endDate:i}=e;return r&&(t=new Date(r)).setUTCHours(0,0,0),i&&(n=new Date(i)).setUTCHours(0,0,0),{...t?{created_gt:t.toISOString()}:{},...n?{created_lt:n.toISOString()}:{}}}({startDate:t,endDate:n}),download_csv:"true"},responseHandler:"content-type"}},providesTags:["Consent Reporting"]})})});var d=()=>{let[e,t]=(0,s.useState)(""),[n,a]=(0,s.useState)(""),o=(0,i.pmc)(),[d,{isLoading:u}]=c(),p=async()=>{let t=await d({startDate:e,endDate:n});if(t.isError)o({status:"error",description:(0,l.e$)(t.error,"A problem occurred while generating your consent report.  Please try again.")});else{let e=document.createElement("a"),n=new Blob([t.data],{type:"text/csv"});e.href=window.URL.createObjectURL(n),e.download="consent-reports.csv",e.click()}};return(0,r.jsxs)(i.Ugi,{gap:4,maxWidth:"720px","data-testid":"consent-reporting",children:[(0,r.jsxs)(i.BZy,{size:"sm",flex:1,children:[(0,r.jsx)(i.UiE,{borderRadius:"md",children:"From"}),(0,r.jsx)(i.IIB,{type:"date",name:"From",value:e,max:n||void 0,onChange:e=>t(e.target.value),borderRadius:"md","data-testid":"input-from-date"})]}),(0,r.jsxs)(i.BZy,{size:"sm",flex:1,children:[(0,r.jsx)(i.UiE,{borderRadius:"md",children:"To"}),(0,r.jsx)(i.IIB,{type:"date",name:"To",value:n,min:e||void 0,onChange:e=>a(e.target.value),borderRadius:"md","data-testid":"input-to-date"})]}),(0,r.jsx)(i.wpx,{onClick:p,loading:u,type:"primary","data-testid":"download-btn",children:"Download report"})]})},u=()=>(0,r.jsxs)(a.Z,{title:"Consent reporting",children:[(0,r.jsx)(o.Z,{heading:"Consent reporting"}),(0,r.jsxs)(i.xuv,{"data-testid":"consent",children:[(0,r.jsx)(i.xvT,{fontSize:"sm",mb:6,width:{base:"100%",lg:"50%"},children:'Download a CSV containing a report of consent preferences made by users on your sites. Select a date range below and click "Download report". Depending on the number of records in the date range you select, it may take several minutes to prepare the file after you click "Download report".'}),(0,r.jsx)(d,{})]})]})},41164:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return i},Dy:function(){return l},XD:function(){return c},cz:function(){return d},hE:function(){return o},oK:function(){return s}});var r=n(76649);let i=e=>"error"in e,s=e=>(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status,a=e=>(0,r.Ln)({status:"number",data:{}},e),o=e=>(0,r.Ln)({detail:"string"},e),l=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),c=e=>(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e),d=e=>(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r}});let r=(e,t)=>s(e,t),i=Symbol("SOME"),s=(e,t)=>"string"==typeof e?e===typeof t:Array.isArray(e)?i in e?e.some(e=>s(e,t)):!!Array.isArray(t)&&(0===e.length||t.every(t=>e.some(e=>s(e,t)))):"object"==typeof t&&null!==t&&Object.entries(e).every(([e,n])=>s(n,t[e]));class a{static narrow(e){return new a(t=>r(e,t))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){let t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a(e=>t(e)&&n(e))}}new a(e=>!0)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=15806)}),_N_E=e.O()}]);