"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7491,2426],{68260:(e,s,i)=>{i.r(s),i.d(s,{DocumentEdit:()=>be,default:()=>ye});var n=i(9387),t=i(20568),a=i(79026),r=i(97096),l=i(83278),c=i(98754),d=i(99180),o=i(93054),u=i(88996),h=i(48371),x=i(64664),m=i(38621),j=i(64699),p=i(70312),g=i(25035),v=i(29325),b=i(61497),y=i(9765),I=i(94789),f=i(94439),A=i(6246),E=i(4674),C=i(60083),D=i(40290),S=i(12532),L=i(46333),N=i(53439),Z=i(90043),M=i(78031),k=i(45838),w=i(50337),z=i(64166),H=i(59798),T=i(53140),B=i(85861),G=i(99526),O=i(43045),P=i(63646),V=i(57804),W=i(98520),K=i(70508),F=i(24967),J=i(26369),Q=i(12224),U=i(28661),R=i(66550),X=i(43016),Y=i(86871),_=i(8075),$=i(503),q=i(18924),ee=i(6111),se=i(86925),ie=i(59910),ne=i(43314),te=i(69660),ae=i(92696),re=i(69522),le=i(18683);function ce(){return(0,le.jsx)("div",{className:"editor-placeholder",children:"Welcome to the Datalayer editor to code and analyse data with AI."})}const de={namespace:"Datalayer Literate Editor",theme:T.$,onError(e){throw e},nodes:[b.k_,y.iK,B.HS,M.ZZ,p.jL,z.fS,G.K1,O._F,P.LX,V.ZD,W.NH,b.Db,v.YW,v.v5,I.y6,p.dJ,g.B9,g.HA,g.py,K.K$]},oe=()=>{const{setEditor:e}=(0,j.uw)(),[s]=(0,f.DF)();return(0,n.useEffect)((()=>(e(s),()=>e(void 0))),[s]),null},ue=e=>{const{notebook:s}=e,[i,t]=(0,n.useState)(null);return(0,le.jsx)(A.n,{initialConfig:de,children:(0,le.jsx)("div",{className:"editor-shell",children:(0,le.jsxs)("div",{className:"editor-container",children:[(0,le.jsx)(F.r,{}),(0,le.jsxs)("div",{className:"editor-inner",children:[(0,le.jsx)(E.$,{contentEditable:(0,le.jsx)("div",{className:"editor-scroller",children:(0,le.jsx)("div",{className:"editor",ref:e=>{null!==e&&t(e)},children:(0,le.jsx)(C.a,{})})}),placeholder:(0,le.jsx)(ce,{}),ErrorBoundary:H.A}),(0,le.jsx)(k.D,{onChange:function(e){}}),(0,le.jsx)(D.G,{}),(0,le.jsx)(S.x,{}),(0,le.jsx)(L.A,{}),(0,le.jsx)(Z.Q,{}),(0,le.jsx)(w.A,{}),(0,le.jsx)(N.W,{}),(0,le.jsx)(J.p,{}),(0,le.jsx)(Q.i,{maxDepth:7}),(0,le.jsx)(U.L,{}),(0,le.jsx)(R.FE,{}),(0,le.jsx)(X.hM,{}),(0,le.jsx)(Y.u,{}),(0,le.jsx)(_.fo,{}),(0,le.jsx)($.GO,{}),(0,le.jsx)(q.C,{}),(0,le.jsx)(ee.LX,{}),(0,le.jsx)(se.K,{notebook:s}),(0,le.jsx)(ie.EZ,{}),(0,le.jsx)(oe,{}),(0,le.jsx)(ne.jR,{providerFactory:void 0}),i&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(te.q,{anchorElem:i}),(0,le.jsx)(ae.U,{anchorElem:i}),(0,le.jsx)(re.x,{anchorElem:i})]})]})]})})})};var he=i(17810),xe=i(53850),me=i(97734),je=i(23530),pe=i(27199),ge=i(41046);const ve=()=>(0,le.jsx)(c.A,{display:"flex",children:(0,le.jsx)(c.A,{children:(0,le.jsx)(d.Q,{variant:"invisible",size:"small",leadingVisual:m.iKr,onClick:()=>ge.xK.getState().save(new Date),children:"Save"})})}),be=()=>{const{documentId:e}=(0,t.g)();if(!e)return(0,le.jsx)(le.Fragment,{});const s=(0,he.J)(),{hideBackdrop:i,setItem:p,showBackdrop:g,space:v,triggerItemsRefresh:b}=(0,pe.l5)(),{documentSaveRequest:y}=(0,ge.q3)(),{editor:I}=(0,j.uw)(),{cloneDocument:f,getDocument:A,refreshDocument:E,updateDocument:C,updateDocumentModel:D}=(0,xe.E)(),{enqueueToast:S}=(0,me.d)(),L=(0,a.S)(),N=(0,je.Z)(),[Z,M]=(0,n.useState)("none"),[k,w]=(0,n.useState)(),[z,H]=(0,n.useState)({name:"",description:""}),[T,B]=(0,n.useState)({name:void 0,description:void 0});(0,n.useEffect)((()=>{if(I&&k&&k.model){const e=I.parseEditorState(k.model);I.setEditorState(e),I.focus((()=>{}),{defaultSelection:"rootStart"})}}),[e,k,I]),(0,n.useEffect)((()=>("properties"!==Z&&(g(),E(e).then((s=>{if(s.success){const s=A(e);s?(w(s),p(s),H({name:s.name,description:s.description})):N("/")}})).finally((()=>{i()}))),()=>{w(void 0),p(void 0)})),[e]),(0,n.useEffect)((()=>{y&&k&&I&&k&&(w({...k,model:I.getEditorState().toJSON()}),g("Saving the document..."),D(e,I.getEditorState().toJSON()).then((e=>{e.success&&S("The document is successfully updated.",{variant:"success"})})).finally((()=>{i()})))}),[y]),(0,n.useEffect)((()=>{B({...T,name:void 0===z.name?void 0:z.name.length>2,description:void 0===z.description?void 0:z.description.length>2})}),[z]);const G=(0,n.useCallback)((async n=>{L({title:"Are you sure?",content:"Please confirm you want to clone this document in your private library."}).then((n=>{n&&(g(),f(e).then((e=>{i(),e.success&&(S(e.message,{variant:"success"}),b(),N(`/${s.handle}/library/documents`))})).finally((()=>{i()})))}))}),[L,k]);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(r.z,{role:"header","aria-label":"Document Editor",children:[(0,le.jsxs)(r.z.TitleArea,{variant:"subtitle",children:[(0,le.jsx)(r.z.Title,{children:"Document Editor"}),(0,le.jsx)(r.z.TrailingVisual,{children:(0,le.jsx)(l.A,{children:"Rich"})})]}),(0,le.jsxs)(r.z.Actions,{children:[k&&(0,le.jsx)(c.A,{children:(0,le.jsx)(ve,{})}),k&&v&&(0,le.jsx)(c.A,{ml:3,children:(0,le.jsx)(d.Q,{variant:"invisible",size:"small",leadingVisual:m.Nc$,onClick:G,children:"Clone"})}),(0,le.jsx)(d.Q,{variant:"invisible",size:"small",leadingVisual:m.L64,onClick:e=>{M("properties"===Z?"none":"properties")},children:"Properties"},"properties")]})]}),(0,le.jsxs)(o.O7,{children:[k&&"properties"===Z&&(0,le.jsx)(o.O7.Pane,{"aria-label":"Document Properties",position:"start",children:(0,le.jsx)(le.Fragment,{children:(0,le.jsx)(c.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,le.jsx)(c.A,{children:(0,le.jsxs)(c.A,{sx:{label:{marginTop:2}},children:[(0,le.jsxs)(u.A,{children:[(0,le.jsx)(u.A.Label,{children:"Name"}),(0,le.jsx)(h.A,{block:!0,value:z.name,onChange:e=>{H((s=>({...s,name:e.target.value})))}}),!1===T.name&&(0,le.jsx)(u.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,le.jsxs)(u.A,{children:[(0,le.jsx)(u.A.Label,{children:"Description"}),(0,le.jsx)(x.Ay,{block:!0,value:z.description,onChange:e=>{H((s=>({...s,description:e.target.value})))}}),!1===T.description&&(0,le.jsx)(u.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,le.jsx)(u.A,{children:(0,le.jsx)(d.Q,{variant:"primary",disabled:!T.name||!T.description,sx:{marginTop:2},onClick:async()=>{g(),C(e,z.name,z.description).then((e=>{e.success&&(S("The document is successfully updated.",{variant:"success"}),b(),w({...k,name:z.name,description:z.description}))})).finally((()=>{i()}))},children:"Update document"})})]})})})})}),(0,le.jsx)(o.O7.Content,{"aria-label":"Document Editor",width:"full",padding:"none",children:k&&k.model&&(0,le.jsx)(c.A,{children:(0,le.jsx)(ue,{})})})]})]})},ye=be},22426:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KPC9zdHlsZT4KPHBhdGggZD0iTTUuMiw1LjlMOSw5LjdsMy44LTMuOGwxLjIsMS4ybC00LjksNWwtNC45LTVMNS4yLDUuOXoiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAtMC42aDE4djE4SDBWLTAuNnoiLz4KPC9zdmc+Cg"}}]);