"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[6478],{86478:(e,t,s)=>{s.r(t),s.d(t,{CellEdit:()=>pe,default:()=>me});var n=s(9387),i=s(45222),a=s(20568),r=s(79026),o=s(97096),l=s(98754),d=s(99180),c=s(38621),h=s(17810),u=s(23530),p=s(97734),m=s(53850),g=s(50906),_=s(47785),x=s(55388),C=s(68914),v=s(18683);const y=()=>{const{getSpaceDatasets:e,refreshSpaceDatasets:t}=(0,m.E)(),s=(0,g.mt)(),i=(0,x.LC)(),a=s.layout().space,r=s.layout().organization,[o,l]=(0,n.useState)(e()),d=o.filter((e=>e.public)),h=o.filter((e=>!e.public));return(0,n.useEffect)((()=>{a&&t(a,r).then((t=>{t.success&&l(e())}))}),[a]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(_.l,{showDividers:!0,role:"menu",children:[(0,v.jsxs)(_.l.Group,{children:[(0,v.jsx)(_.l.GroupHeading,{children:"My public datasets"}),d.map((e=>(0,v.jsxs)(_.l.Item,{onClick:t=>{t.preventDefault(),i.setDataset("cell",e)},children:[(0,v.jsx)(_.l.LeadingVisual,{children:(0,v.jsx)(c.bN0,{})}),e.name,(0,v.jsx)(_.l.Description,{children:(0,C.b)(e.description)})]},e.id))),0===d.length&&(0,v.jsx)(_.l.Item,{disabled:!0,children:"No public dataset"})]}),(0,v.jsxs)(_.l.Group,{children:[(0,v.jsx)(_.l.GroupHeading,{children:"My private datasets"}),h.map((e=>(0,v.jsxs)(_.l.Item,{onClick:t=>{t.preventDefault(),i.setDataset("cell",e)},children:[(0,v.jsx)(_.l.LeadingVisual,{children:(0,v.jsx)(c.bN0,{})}),e.name,(0,v.jsx)(_.l.Description,{children:(0,C.b)(e.description)})]},e.id))),0===h.length&&(0,v.jsx)(_.l.Item,{disabled:!0,children:"No private dataset"})]})]})})};var f=s(88996),w=s(48371),k=s(64664),S=s(92985),j=s(85545),b=s(87237),I=s(27199),E=s(76818),A=s(70408);const N=e=>{const{cell:t}=e,s=((0,u.Z)(),t.outputshotUrl||t.outputshotData);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(A.Zp,{border:!0,rounded:"medium",shadow:"medium",sx:{maxWidth:360},children:[(0,v.jsx)(A.Zp.Header,{title:"Cell",description:(0,C.b)(t.name,100)}),(0,v.jsx)(A.Zp.Image,{height:200,image:s}),(0,v.jsx)(A.Zp.Content,{children:(0,v.jsx)(E.A,{color:"fg.muted",children:(0,C.b)(t.description,100)})})]})})},D=(0,S.t)((0,j.Y)((()=>Promise.all([s.e(7583),s.e(754)]).then(s.bind(s,60754))))),K=()=>{const{cell:e,update:t}=(0,b.Xp)();if(!e)return(0,v.jsx)(v.Fragment,{});const{updateCell:s}=(0,m.E)(),{space:i,showBackdrop:a,triggerItemsRefresh:r,hideBackdrop:o}=(0,I.l5)(),{enqueueToast:c}=(0,p.d)(),[h,u]=(0,n.useState)(!1),[g,_]=(0,n.useState)({name:e.name,description:e.description}),[x,C]=(0,n.useState)({name:!0,description:!0});return(0,n.useEffect)((()=>{C({...x,name:void 0===g.name?void 0:g.name.length>2,description:void 0===g.description?void 0:g.description.length>2})}),[g]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[(0,v.jsxs)(l.A,{sx:{label:{marginTop:2}},children:[(0,v.jsxs)(f.A,{children:[(0,v.jsx)(f.A.Label,{children:"Name"}),(0,v.jsx)(w.A,{block:!0,value:g.name,onChange:e=>{_((t=>({...t,name:e.target.value}))),t({name:e.target.value})}}),!1===x.name&&(0,v.jsx)(f.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,v.jsxs)(f.A,{children:[(0,v.jsx)(f.A.Label,{children:"Description"}),(0,v.jsx)(k.Ay,{block:!0,value:g.description,onChange:e=>{_((t=>({...t,description:e.target.value}))),t({description:e.target.value})}}),!1===x.description&&(0,v.jsx)(f.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,v.jsx)(f.A,{sx:{marginTop:3},children:(0,v.jsxs)(l.A,{display:"flex",children:[(0,v.jsx)(d.Q,{variant:"primary",disabled:h||!x.name||!x.description,onClick:()=>{e?.outputshotData.length>3e5?c(`Output screenshot is too large (actual size is ${e?.outputshotData.length}, the maximum allowed is 300000)`,{variant:"error"}):(a(),u(!0),s({id:e?.id,name:e?.name,description:e?.description,source:e.source,outputshotUrl:e.outputshotUrl,outputshotData:e?.outputshotUrl?void 0:e?.outputshotData,spaceId:i?.id}).then((s=>{if(u(!1),s.success){const s={...e,public:e.public,description:e.description,source:e.source,outputshotUrl:e.outputshotUrl,outputshotData:e.outputshotData};r(),t(s),c("The cell is successfully updated.",{variant:"success"})}})).finally((()=>{u(!1),o()})))},children:h?"Updating cell...":"Update cell"}),(0,v.jsx)(l.A,{ml:3,children:(0,v.jsx)(D,{})})]})})]}),(0,v.jsx)(l.A,{ml:3,children:(0,v.jsx)(N,{cell:e})})]})})};var M=s(55881),R=s(42968),B=s(17402),T=s(50059),z=s(14809),L=s(38921),P=s(16950),W=s(80578),O=s(99650),F=s(53294),G=s(63527),U=s(89895),$=s(30574),J=s(62097),H=s(37706),Z=s(71784),Q=s(89492),V=s(67004),q=s(53054),X=s(89915),Y=s(97789),ee=s(20492),te=s(75987),se=s(85112),ne=s(49237),ie=s(89462),ae=s(5190),re=s(91923);const oe="completer:invoke",le="completer:select";var de=s(19326);class ce{_id;_cell;_kernel;_panel;_sessionContext;_type;constructor(e){const{id:t,type:s,source:n,serverSettings:i,kernel:a,boxOptions:r}=e;this._id=t,this._kernel=a,this._type=s,this.setupCell(s,n,i,a,r)}setupCell(e="code",t,n,i,a){const r=i.kernelManager??new Y.KernelManager({serverSettings:n}),o=i.sessionManager??new Y.SessionManager({serverSettings:n,kernelManager:r}),l=i.kernelSpecManager??new Y.KernelSpecManager({serverSettings:n}),d=i?{id:i.id,shouldStart:!1,autoStartDefault:!1,shutdownOnDispose:!1}:{name:"python",shouldStart:!0,autoStartDefault:!0,shutdownOnDispose:!0};this._sessionContext=new W.I({name:i?.path,path:i?.path,sessionManager:o,specsManager:l,type:"python",kernelPreference:d}),this._sessionContext._initialize=async()=>{const e=this._sessionContext.sessionManager;await e.ready,await e.refreshRunning();const t=(0,L.I6)(e.running(),(e=>e.kernel?.id===this._kernel.id));if(t)try{const s=e.connectTo({model:t,kernelConnectionOptions:{handleComms:!0}});this._sessionContext._handleNewSession(s)}catch(e){return this._sessionContext._handleSessionError(e),Promise.reject(e)}return await this._sessionContext._startIfNecessary()};const c=new U.k8;for(const e of U.k8.getDefaultThemes())c.addTheme(e);const h=new U.T9;for(const e of U.T9.getDefaultLanguages())h.addLanguage(e);h.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>(await Promise.all([s.e(6636),s.e(9946),s.e(2899),s.e(5949)]).then(s.bind(s,15949))).markdown({codeLanguages:e=>h.findBest(e)})});const u=new U.mN(h),p=new P.J;document.addEventListener("keydown",(e=>{const t=document.activeElement;t&&t.closest(".dla-Jupyter-Cell")===this._cell.node&&p.processKeydownEvent(e)}),!0);const m=new q.K({initialFactories:X.dn,latexTypesetter:new $.p,markdownParser:(0,re.A)(h)}),g=new ne.y({loader:ae.l});m.addFactory({safe:!1,mimeTypes:[ie.a],createRenderer:e=>new ie.u(e,g)},0),g.registerWithKernel(i.connection);const _=new U.Ez({extensions:(()=>{const e=new U.AG;for(const t of U.AG.getDefaultExtensions({themes:c}))e.addExtension(t);return e.addExtension({name:"shared-model-binding",factory:e=>{const t=e.model.sharedModel;return U.AG.createImmutableExtension((0,U.rX)({ytext:t.ysource,undoManager:t.undoManager??void 0}))}}),e})(),languages:h}),x=(0,te.MQ)({cell_type:e,source:t,metadata:{}}),C=new M.fh.ContentFactory({editorFactory:_.newInlineEditor.bind(_)});"code"===e?this._cell=new M.Yr({rendermime:m,model:new G.DJ({sharedModel:x}),contentFactory:C}):"markdown"===e&&(this._cell=new M.KI({rendermime:m,model:new G.Xr({sharedModel:x}),contentFactory:C})),this._cell.addClass("dla-Jupyter-Cell"),this._cell.initializeState(),"markdown"===this._type&&(this._cell.rendered=!1),this._sessionContext.kernelChanged.connect(((e,t)=>{const s=t.newValue;console.log("Current Jupyter Kernel Connection",s),s&&!s.handleComms&&(console.warn("Jupyter Kernel Connection does not handle Comms",s.id),s.handleComms=!0,console.log("Jupyter Kernel Connection is updated to enforce Comms support",s.handleComms)),g.registerWithKernel(s)})),this._sessionContext.kernelChanged.connect((()=>{this._sessionContext.session?.kernel?.info.then((e=>{if("code"===this._type){const t=e.language_info,s=u.getMimeTypeByLanguage(t);this._cell.model&&(this._cell.model.mimeType=s)}}))}));const v=this._cell.editor,y=new J.X,f=new H.A({editor:v,model:y}),w=new Z.G,k=new Q.C({context:{widget:this._cell,editor:v,session:this._sessionContext.session},providers:[w],timeout:1e3}),S=new V.$({completer:f,reconciliator:k});this._sessionContext.ready.then((()=>{const e=new Z.G;S.reconciliator=new Q.C({context:{widget:this._cell,editor:v,session:this._sessionContext.session},providers:[e],timeout:1e3})})),this._cell.ready.then((()=>{S.editor=this._cell&&this._cell.editor})),((e,t,s,n)=>{e.addCommand(oe,{label:"Completer: Invoke",execute:()=>s.invoke()}),e.addCommand(le,{label:"Completer: Select",execute:()=>s.completer.selectActive()}),e.addCommand("run:cell",{execute:()=>{t instanceof M.Yr?n.execute():t instanceof M.KI&&(t.rendered=!0)}}),e.addKeyBinding({selector:".jp-InputArea-editor.jp-mod-completer-enabled",keys:["Tab"],command:oe}),e.addKeyBinding({selector:".jp-InputArea-editor",keys:["Shift Enter"],command:"run:cell"}),[{selector:".jp-InputArea-editor.jp-mod-completer-active",keys:["Enter"],command:le}].map((t=>e.addKeyBinding(t)))})(p,this._cell,S,this),f.hide(),f.addClass("jp-Completer-Cell"),z.x0.attach(f,document.body);const j=new O.M7;j.addItem("spacer",O.M7.createSpacerItem());const b=new F.IB({icon:ee.J7,onClick:()=>{"code"===this._type?this.execute():"markdown"===this._type&&(this._cell.rendered=!0)},tooltip:"Run"});j.addItem("run",b),j.addItem("interrupt",O.M7.createInterruptButton(this._sessionContext)),j.addItem("restart",O.M7.createRestartButton(this._sessionContext)),j.addItem("status",O.M7.createKernelStatusItem(this._sessionContext)),"code"===this._type&&(this._cell.outputsScrolled=!1),this._cell.activate(),this._panel=new z.e6,this._panel.direction="top-to-bottom",this._panel.spacing=0,!1!==a?.showToolbar&&this._panel.addWidget(j),this._panel.addWidget(this._cell),!1!==a?.showToolbar&&z.e6.setStretch(j,0),z.e6.setStretch(this._cell,1),window.addEventListener("resize",(()=>{this._panel.update()})),this._panel.update()}get panel(){return this._panel}get cell(){return this._cell}get sessionContext(){return this._sessionContext}get kernel(){return this._kernel}execute=()=>{"code"===this._type?this._execute(this._cell):"markdown"===this._type&&(this._cell.rendered=!0)};async _execute(e,t){de.vw.getState().setIsExecuting(this._id,!0);const s=e.model,n=s.sharedModel.getSource();if(!n.trim()||!this.kernel)return s.sharedModel.transact((()=>{s.clearExecution()}),!1),de.vw.getState().setIsExecuting(this._id,!1),new Promise((()=>{}));const i={cellId:s.sharedModel.getId()};t={...s.metadata,...t,...i};const{recordTiming:a}=t;let r;s.sharedModel.transact((()=>{s.clearExecution(),e.outputHidden=!1}),!1),e.setPrompt("*"),s.trusted=!0;try{const i=(0,se.g)(this._id,n,e.outputArea,this._kernel,t);if(a){const t=e=>{let t;switch(e.header.msg_type){case"status":t=`status.${e.content.execution_state}`;break;case"execute_input":t="execute_input";break;default:return!0}const n=e.header.date||(new Date).toISOString(),i=Object.assign({},s.getMetadata("execution"));return i[`iopub.${t}`]=n,s.setMetadata("execution",i),!0};e.outputArea.future.registerMessageHook(t)}else s.deleteMetadata("execution");r=e.outputArea.future;const o=await i;if(s.executionCount=o.content.execution_count,a){const e=Object.assign({},s.getMetadata("execution")),t=o.metadata.started;t&&(e["shell.execute_reply.started"]=t);const n=o.header.date;e["shell.execute_reply"]=n||(new Date).toISOString(),s.setMetadata("execution",e)}return de.vw.getState().setIsExecuting(this._id,!1),o}catch(t){if(de.vw.getState().setIsExecuting(this._id,!1),r&&!e.isDisposed&&e.outputArea.future===r&&(e.setPrompt(""),a&&r.isDisposed)){const e=Object.assign({},s.getMetadata("execution"));e.execution_failed=(new Date).toISOString(),s.setMetadata("execution",e)}throw t}}}const he=e=>{const{autoStart:t,showToolbar:s,source:i="",startDefaultKernel:a,type:r,kernel:o}=e,{defaultKernel:d,serverSettings:c}=(0,R.PD)({startDefaultKernel:a}),[h]=(0,n.useState)(e.id||(0,B.YG)()),[u,p]=(0,n.useState)(),m=(0,de.Ui)();return(0,n.useEffect)((()=>{const e=o||d;h&&c&&e&&e.ready.then((()=>{const n=new ce({id:h,type:r,source:i,serverSettings:c,kernel:e,boxOptions:{showToolbar:s}});m.setAdapter(h,n),m.setSource(h,i),(e=>{e.cell.model.contentChanged.connect(((e,t)=>{m.setSource(h,e.sharedModel.getSource())})),e.cell instanceof M.Yr&&e.cell.outputArea.outputLengthChanged?.connect(((e,t)=>{m.setOutputsCount(h,t)})),e.sessionContext.initialize().then((()=>{t&&e.cell.model&&e.execute()})),e.sessionContext.kernelChanged.connect((()=>{e.sessionContext.session?.kernel?.info.then((e=>{m.setKernelSessionAvailable(h,!0)}))}))})(n),p(n);const a=e=>{let t=e.target;for(;t&&!t.classList.contains("jp-MarkdownOutput");)t=t.parentElement;t&&t.classList.contains("jp-MarkdownOutput")&&(n.cell.rendered=!1)};return document.addEventListener("dblclick",a),()=>{document.removeEventListener("dblclick",a)}}))}),[i,d,o,c]),u?(0,v.jsx)(l.A,{sx:{"& .dla-Jupyter-Cell":{position:"relative !important",contain:"content !important"},"& .jp-Toolbar":{height:"auto !important",position:"relative"},"& .lm-BoxPanel":{position:"relative"},"& .jp-Cell":{position:"relative"},"& .jp-CodeCell":{height:"auto !important",position:"relative"},"& .jp-MarkdownCell":{height:"auto !important",minHeight:"65px",position:"relative"},"& .jp-Cell-outputArea":{paddingBottom:"30px"},"& .jp-CodeMirrorEditor":{cursor:"text !important"}},children:(0,v.jsx)(T.j,{children:u.panel})}):(0,v.jsx)(l.A,{children:"Loading Jupyter Cell..."})};he.defaultProps={autoStart:!0,showToolbar:!0,startDefaultKernel:!0,type:"code"};const ue=e=>{const{source:t,outputshotRef:s,cellId:n}=e;return(0,v.jsx)(l.A,{ref:s,style:{marginTop:"8px"},children:(0,v.jsx)(he,{startDefaultKernel:!0,source:t,id:n,autoStart:!0,showToolbar:!1})})},pe=()=>{const{cellId:e}=(0,a.g)();if(!e)return(0,v.jsx)(v.Fragment,{});const t=(0,h.J)(),s=(0,g.mt)(),_=s.layout().space,x=s.cell().cell,C=(0,r.S)(),f=(0,u.Z)(),{enqueueToast:w}=(0,p.d)(),{getCell:k,refreshCell:S,cloneCell:j}=(0,m.E)(),[b,I]=(0,n.useState)(),[E,A]=(0,n.useState)(!1),N=(0,n.useMemo)((()=>(0,n.createRef)()),[]);(0,n.useEffect)((()=>{const t=document.getElementById("right-panel-id"),n=(0,i.createPortal)((0,v.jsx)(y,{}),t);return s.layout().setRightPortal({portal:n,pinned:!1}),S(e).then((t=>{if(t.success){const t=k(e);t?(I(t.source),s.cell().update(t),s.layout().setItem(t),I(t.source)):f("/")}})),()=>{s.layout().setItem(void 0)}}),[e]);const D=(0,n.useCallback)((async n=>{C({title:"Are you sure?",content:"Please confirm you want to clone this cell in your private library."}).then((n=>{n&&j(e).then((e=>{e.success&&(w(e.message,{variant:"success"}),s.layout().triggerItemsRefresh(),f(`/${t?.handle}/library/cells`))}))}))}),[C,x]);return(0,v.jsx)(v.Fragment,{children:x&&b&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(o.z,{role:"header","aria-label":"Cell Editor",children:[(0,v.jsx)(o.z.TitleArea,{variant:"subtitle",children:(0,v.jsx)(o.z.Title,{children:"Cell Editor"})}),(0,v.jsxs)(o.z.Actions,{children:[(0,v.jsx)(l.A,{children:E?(0,v.jsx)(d.Q,{variant:"invisible",size:"small",onClick:()=>A(!1),children:"Hide details"}):(0,v.jsx)(d.Q,{variant:"invisible",size:"small",onClick:()=>A(!0),children:"Show details"})}),(0,v.jsx)(l.A,{ml:1,children:t&&_&&(0,v.jsx)(d.Q,{variant:"invisible",size:"small",leadingVisual:c.Nc$,onClick:D,children:"Clone"})})]})]}),(0,v.jsxs)(l.A,{children:[E&&(0,v.jsx)(l.A,{children:(0,v.jsx)(K,{})}),(0,v.jsx)(l.A,{children:(0,v.jsx)(ue,{source:b,outputshotRef:N,cellId:x?.id})})]})]})})},me=pe},99650:(e,t,s)=>{s.d(t,{M7:()=>m});var n,i,a=s(53294),r=s(85181),o=s(20492),l=s(88037),d=s(72879),c=s(14809),h=s(9387),u=s(80578),p=s(69474);!function(e){e.createInterruptButton=function(e,t){const s=(t=t||r.wK).load("jupyterlab");return new a.IB({icon:o.mU,onClick:()=>{var t,s;null===(s=null===(t=e.session)||void 0===t?void 0:t.kernel)||void 0===s||s.interrupt()},tooltip:s.__("Interrupt the kernel")})},e.createRestartButton=function(e,t,s){const n=(s=null!=s?s:r.wK).load("jupyterlab");return new a.IB({icon:o.he,onClick:()=>{(null!=t?t:new u.V({translator:s})).restart(e)},tooltip:n.__("Restart the kernel")})},e.createKernelNameItem=function(e,t,s){const n=l._Q.create(h.createElement(i.KernelNameComponent,{sessionContext:e,dialogs:null!=t?t:new u.V({translator:s}),translator:s}));return n.addClass("jp-KernelName"),n},e.createKernelStatusItem=function(e,t){return new i.KernelStatus(e,t)}}(n||(n={})),function(e){e.KernelNameComponent=function(e){const t=(e.translator||r.wK).load("jupyterlab"),s=()=>{e.dialogs.selectKernel(e.sessionContext)};return h.createElement(l.mE,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>h.createElement(a.fQ,{className:"jp-Toolbar-kernelName",onClick:s,tooltip:t.__("Switch kernel"),label:null==e?void 0:e.kernelDisplayName})))};class t extends c.x0{constructor(e,t){super(),this.translator=t||r.wK,this._trans=this.translator.load("jupyterlab"),this.addClass("jp-Toolbar-kernelStatus"),this._statusNames=(0,p._)(this.translator),this._onStatusChanged(e),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed)return;const t=e.kernelDisplayStatus,s={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};d.Tl.remove(this.node),"busy"===t||"starting"===t||"terminating"===t||"restarting"===t||"initializing"===t?o.sF.element(s):"connecting"===t||"disconnected"===t||"unknown"===t?o.KN.element(s):o.Rt.element(s)}}e.KernelStatus=t}(i||(i={}));class m extends a.M7{}!function(e){e.createInterruptButton=n.createInterruptButton,e.createKernelNameItem=n.createKernelNameItem,e.createKernelStatusItem=n.createKernelStatusItem,e.createRestartButton=n.createRestartButton,e.createSpacerItem=a.M7.createSpacerItem}(m||(m={}))},69474:(e,t,s)=>{s.d(t,{_:()=>l,s:()=>c});var n=s(62939),i=s(85181),a=s(88037),r=s(98238),o=s(9387);function l(e){const t=(e=e||i.wK).load("jupyterlab");return{unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""}}function d(e){const t=(e.translator||i.wK).load("jupyterlab");let s="";return e.status&&(s=` | ${e.status}`),o.createElement(n.pC,{onClick:e.handleClick,source:`${e.kernelName}${s}`,title:t.__("Change kernel for %1",e.activityName)})}class c extends a.QX{constructor(e,t){super(new c.Model(t)),this.translator=t||i.wK,this._handleClick=e.onClick,this.addClass("jp-mod-highlighted")}render(){return null===this.model?null:o.createElement(d,{status:this.model.status,kernelName:this.model.kernelName,activityName:this.model.activityName,handleClick:this._handleClick,translator:this.translator})}}!function(e){class t extends a.AF{constructor(e){super(),this._activityName="",this._kernelName="",this._kernelStatus="",this._sessionContext=null,e=null!=e?e:i.wK,this._trans=e.load("jupyterlab"),this._statusNames=l(e)}get kernelName(){return this._kernelName}get status(){return this._kernelStatus?this._statusNames[this._kernelStatus]:void 0}get activityName(){return this._activityName}set activityName(e){this._activityName!==e&&(this._activityName=e,this.stateChanged.emit())}get sessionContext(){return this._sessionContext}set sessionContext(e){var t,s,n,i;null===(t=this._sessionContext)||void 0===t||t.statusChanged.disconnect(this._onKernelStatusChanged,this),null===(s=this._sessionContext)||void 0===s||s.connectionStatusChanged.disconnect(this._onKernelStatusChanged,this),null===(n=this._sessionContext)||void 0===n||n.kernelChanged.disconnect(this._onKernelChanged,this);const a=this._getAllState();this._sessionContext=e,this._kernelStatus=null==e?void 0:e.kernelDisplayStatus,this._kernelName=null!==(i=null==e?void 0:e.kernelDisplayName)&&void 0!==i?i:this._trans.__("No Kernel"),null==e||e.statusChanged.connect(this._onKernelStatusChanged,this),null==e||e.connectionStatusChanged.connect(this._onKernelStatusChanged,this),null==e||e.kernelChanged.connect(this._onKernelChanged,this),this._triggerChange(a,this._getAllState())}_onKernelStatusChanged(){var e;this._kernelStatus=null===(e=this._sessionContext)||void 0===e?void 0:e.kernelDisplayStatus,this.stateChanged.emit(void 0)}_onKernelChanged(e,t){var s;const n=this._getAllState();this._kernelStatus=null===(s=this._sessionContext)||void 0===s?void 0:s.kernelDisplayStatus,this._kernelName=e.kernelDisplayName,this._triggerChange(n,this._getAllState())}_getAllState(){return[this._kernelName,this._kernelStatus,this._activityName]}_triggerChange(e,t){r.JSONExt.deepEqual(e,t)&&this.stateChanged.emit(void 0)}}e.Model=t}(c||(c={}))},62939:(e,t,s)=>{s.d(t,{NZ:()=>i,$O:()=>x,z2:()=>d,a3:()=>u,eA:()=>_,pC:()=>h,yp:()=>o});var n=s(9387);function i(e){const{spacing:t,children:s,className:i,...a}=e,r=n.Children.count(s);return n.createElement("div",{className:`jp-StatusBar-GroupItem ${i||""}`,...a},n.Children.map(s,((e,s)=>0===s?n.createElement("div",{style:{marginRight:`${t}px`}},e):s===r-1?n.createElement("div",{style:{marginLeft:`${t}px`}},e):n.createElement("div",{style:{margin:`0px ${t}px`}},e))))}var a=s(60639),r=s(14809);function o(e){const t=new l(e);return e.startHidden||t.launch(),t}class l extends r.x0{constructor(e){super(),this.addClass("jp-ThemedContainer"),this._body=e.body,this._body.addClass("jp-StatusBar-HoverItem"),this._anchor=e.anchor,this._align=e.align,e.hasDynamicSize&&(this._observer=new ResizeObserver((()=>{this.update()}))),(this.layout=new r.DG).addWidget(e.body),this._body.node.addEventListener("resize",(()=>{this.update()}))}launch(){this._setGeometry(),r.x0.attach(this,document.body),this.update(),this._anchor.addClass("jp-mod-clicked"),this._anchor.removeClass("jp-mod-highlight")}onUpdateRequest(e){this._setGeometry(),super.onUpdateRequest(e)}onAfterAttach(e){var t;document.addEventListener("click",this,!1),this.node.addEventListener("keydown",this,!1),window.addEventListener("resize",this,!1),null===(t=this._observer)||void 0===t||t.observe(this._body.node)}onBeforeDetach(e){var t;null===(t=this._observer)||void 0===t||t.disconnect(),document.removeEventListener("click",this,!1),this.node.removeEventListener("keydown",this,!1),window.removeEventListener("resize",this,!1)}onResize(){this.update()}dispose(){var e;null===(e=this._observer)||void 0===e||e.disconnect(),super.dispose(),this._anchor.removeClass("jp-mod-clicked"),this._anchor.addClass("jp-mod-highlight")}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"click":this._evtClick(e);break;case"resize":this.onResize()}}_evtClick(e){!e.target||this._body.node.contains(e.target)||this._anchor.node.contains(e.target)||this.dispose()}_evtKeydown(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.dispose())}_setGeometry(){let e=0;const t=this._anchor.node.getBoundingClientRect(),s=this._body.node.getBoundingClientRect();"right"===this._align&&(e=-(s.width-t.width));const n=window.getComputedStyle(this._body.node);a.e.setGeometry({anchor:t,host:document.body,maxHeight:500,minHeight:20,node:this._body.node,offset:{horizontal:e},privilege:"forceAbove",style:n})}}function d(e){const{width:t,percentage:s,...i}=e;return n.createElement("div",{className:"jp-Statusbar-ProgressBar-progress-bar",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":s},n.createElement(c,{percentage:s,...i,contentWidth:t}))}function c(e){return n.createElement("div",{style:{width:`${e.percentage}%`}},n.createElement("p",null,e.content))}function h(e){const{title:t,source:s,className:i,...a}=e;return n.createElement("span",{className:`jp-StatusBar-TextItem ${i}`,title:t,...a},s)}function u(e){return n.createElement("div",{className:"jp-Statusbar-ProgressCircle",role:"progressbar","aria-label":e.label||"Unlabelled progress circle","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.progress},n.createElement("svg",{viewBox:"0 0 250 250"},n.createElement("circle",{cx:"125",cy:"125",r:"104",stroke:"var(--jp-inverse-layout-color3)",strokeWidth:"20",fill:"none"}),n.createElement("path",{className:"jp-Statusbar-ProgressCirclePath",transform:"translate(125,125) scale(.9)",d:(e=>{const t=Math.max(3.6*e,.1),s=t*Math.PI/180,n=104*Math.sin(s),i=-104*Math.cos(s);return"M 0 0 v -104 A 104 104 1 "+(t<180?1:0)+" 0 "+n.toFixed(4)+" "+i.toFixed(4)+" z"})(e.progress),fill:"var(--jp-inverse-layout-color3)"})))}var p,m=s(38921),g=s(79246);class _ extends r.x0{constructor(){super(),this._isWindowNarrow=()=>window.innerWidth<=630,this._leftRankItems=[],this._rightRankItems=[],this._statusItems={},this._disposables=new g.DisposableSet,this.addClass("jp-StatusBar-Widget");const e=this.layout=new r.DG,t=this._leftSide=new r.Zk,s=this._middlePanel=new r.Zk,n=this._rightSide=new r.Zk;t.addClass("jp-StatusBar-Left"),s.addClass("jp-StatusBar-Middle"),n.addClass("jp-StatusBar-Right"),e.addWidget(t),e.addWidget(s),e.addWidget(n)}registerStatusItem(e,t){if(e in this._statusItems)throw new Error(`Status item ${e} already registered.`);const s={...p.statusItemDefaults,...t},{align:n,item:i,rank:a,priority:r}=s,o=()=>{this._refreshItem(e)};s.activeStateChanged&&s.activeStateChanged.connect(o);const l={id:e,rank:a,priority:r};if(s.item.addClass("jp-StatusBar-Item"),this._statusItems[e]=s,"left"===n){const e=this._findInsertIndex(this._leftRankItems,l);-1===e?(this._leftSide.addWidget(i),this._leftRankItems.push(l)):(m.Rw.insert(this._leftRankItems,e,l),this._leftSide.insertWidget(e,i))}else if("right"===n){const e=this._findInsertIndex(this._rightRankItems,l);-1===e?(this._rightSide.addWidget(i),this._rightRankItems.push(l)):(m.Rw.insert(this._rightRankItems,e,l),this._rightSide.insertWidget(e,i))}else this._middlePanel.addWidget(i);this._refreshItem(e);const d=new g.DisposableDelegate((()=>{delete this._statusItems[e],s.activeStateChanged&&s.activeStateChanged.disconnect(o),i.parent=null,i.dispose()}));return this._disposables.add(d),d}dispose(){this._leftRankItems.length=0,this._rightRankItems.length=0,this._disposables.dispose(),super.dispose()}onUpdateRequest(e){this._refreshAll(),super.onUpdateRequest(e)}_findInsertIndex(e,t){return m.Rw.findFirstIndex(e,(e=>e.rank>t.rank))}_refreshItem(e){const t=this._statusItems[e];!t.isActive()||0===t.priority&&this._isWindowNarrow()?t.item.hide():(t.item.show(),t.item.update())}_refreshAll(){Object.keys(this._statusItems).forEach((e=>{this._refreshItem(e)}))}}!function(e){e.statusItemDefaults={align:"left",rank:0,priority:0,isActive:()=>!0,activeStateChanged:void 0}}(p||(p={}));const x=new(s(98238).Token)("@jupyterlab/statusbar:IStatusBar","A service for the status bar on the application. Use this if you want to add new status bar items.")}}]);