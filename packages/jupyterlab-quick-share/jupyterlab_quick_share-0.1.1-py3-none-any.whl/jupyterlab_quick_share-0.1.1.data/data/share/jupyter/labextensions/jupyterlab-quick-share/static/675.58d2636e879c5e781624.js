"use strict";(self.webpackChunkjupyterlab_quick_share=self.webpackChunkjupyterlab_quick_share||[]).push([[675],{675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var a=r(209),o=r(830),n=r(593),i=r(655),s=r(310),c=r(421);const l={id:"jupyterlab-quick-share:plugin",description:"Send/receive links that make it easy to share notebooks (and other files)",autoStart:!0,requires:[o.IDefaultFileBrowser,n.ISettingRegistry],activate:async(e,t,r)=>{console.log("JupyterLab extension jupyterlab-quick-share is activated!"),(await r.load(l.id)).composite.private.enableJupytextIssue1344Fix&&function(e){e.shell.layoutModified.connect((()=>{var e;const t=document.querySelector(".jp-Launcher-content");if(!t)return;const r=document.querySelectorAll(".jp-Launcher-sectionTitle"),a=u("Jupytext",r);a&&(t.prepend(a),null===(e=u("Notebook",r))||void 0===e||e.remove())}))}(e),e.commands.addCommand("jupyterlab-quick-share:share",{label:"Copy Quick Share Link",icon:i.shareIcon,execute:async()=>{const e=t.selectedItems(),r=e.next().value;if(e.next().value)(0,a.showErrorMessage)("Quick Share Failed","Only one file can be shared at a time");else try{const e=await async function(e="",t={}){const r=c.ServerConnection.makeSettings(),a=s.URLExt.join(r.baseUrl,"jupyterlab-quick-share",e);let o;try{o=await c.ServerConnection.makeRequest(a,t,r)}catch(e){throw new c.ServerConnection.NetworkError(e)}let n=await o.text();if(n.length>0)try{n=JSON.parse(n)}catch(e){console.log("Not a JSON response body.",o)}if(!o.ok)throw new c.ServerConnection.ResponseError(o,n.message||n);return n}(`share?path=${encodeURIComponent(r.path)}`);await navigator.clipboard.writeText(e.url),console.log("Copied to clipboard:",e.url)}catch(e){console.error("Failed to copy quick share link:",e),(0,a.showErrorMessage)("Quick Share Failed",e)}}}),e.contextMenu.addItem({command:"jupyterlab-quick-share:share",selector:'.jp-DirListing-item[data-isdir="false"]',rank:0})}};function u(e,t){var r;return null===(r=Array.from(t).find((t=>{var r;return(null===(r=t.textContent)||void 0===r?void 0:r.trim())===e})))||void 0===r?void 0:r.closest(".jp-Launcher-section")}const d=l}}]);