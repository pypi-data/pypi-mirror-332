(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{30733:function(e,t,n){var o=n(96738);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var o=arguments,i=t?t.apply(this,o):o[0],a=n.cache;if(a.has(i))return a.get(i);var r=e.apply(this,o);return n.cache=a.set(i,r)||a,r};return n.cache=new(i.Cache||o),n}i.Cache=o,e.exports=i},10330:function(e,t,n){"use strict";n(2784),(d=g||(g={})).flagDebugConsoleLogging="flagDebugConsoleLogging",d.flagDisableWebsockets="flagDisableWebsockets",d.flagSidebarResources="flagSidebarResources",d.flagDisableAutoLoadDefaults="flagDisableAutoLoadDefaults",d.flagLegacyRunsPage="flagLegacyRunsPage",d.flagSelectionSyntax="flagSelectionSyntax",d.flagAssetSelectionWorker="flagAssetSelectionWorker",d.__TestFlagDefaultNone="__TestFlagDefaultNone",d.__TestFlagDefaultTrue="__TestFlagDefaultTrue",d.__TestFlagDefaultFalse="__TestFlagDefaultFalse",g.flagAssetSelectionWorker,g.flagSelectionSyntax,new URLSearchParams(null!==(c=null===(f=n.g)||void 0===f?void 0:null===(p=f.location)||void 0===p?void 0:p.search)&&void 0!==c?c:"").has("new-asset-selection-syntax"),g.__TestFlagDefaultTrue,g.__TestFlagDefaultFalse;let o="DAGSTER_FLAGS",i="__featureFlags",a=e=>{if("object"!=typeof e||Array.isArray(e))throw Error("flags must be an object mapping FeatureFlag to boolean values");"undefined"!=typeof localStorage&&localStorage.setItem(o,JSON.stringify(e))},r=new BroadcastChannel("feature-flags");(()=>{let e=function(e){let t;try{if(t=window.localStorage.getItem(e))return JSON.parse(t)}catch{if("string"==typeof t)return t;return}}(o);if(Array.isArray(e)){let t={};e.forEach(e=>{t[e]=!0}),a(t),e=t}})();let s=e=>{a(e),r.postMessage("updated")};var d,l,h,u,g,p,f,c,y,m,x,b,w,v,E=n(46506),O=n(41059),N=n(72779),k=n(13980),S=n.n(k),_=n(60568);S().oneOfType([S().func,S().object]),S().func,S().func,S().func,S().func,S().func,S().string,S().func,S().any;var D=n(30733),M=n.n(D);n(77105),n(54073),M()(e=>new Intl.NumberFormat(e,{minimumFractionDigits:3,maximumFractionDigits:3})),new Intl.Collator(navigator.language,{sensitivity:"base"}),(l=y||(y={})).GLOBAL="global",l.JOB="job",l.GROUP="group";let T=e=>JSON.stringify(e.path),j=e=>({path:JSON.parse(e),__typename:"AssetKey"});(0,O.H)({source:e=>e.source,target:e=>e.target,x:e=>e.x,y:e=>e.y}),x=(m={source:e=>e.source,target:e=>e.target,x:e=>e.x,y:e=>e.y}).source,b=m.target,w=m.x,v=m.y;let F=e=>/^[^@:]+@[^@:]+:.+$/.test(e),L=e=>[e.definition.repository.name,"@",e.definition.repository.location.name,":",e.definition.groupName].join(""),A=M()((e,t)=>{let n=Object.keys(t.upstream[T(e)]||{}).map(e=>j(e));return[e,...n,...n.map(e=>A(e,t)).flat()].filter((e,t,n)=>n.findIndex(t=>JSON.stringify(t)===JSON.stringify(e))===t)},(e,t)=>JSON.stringify({key:e,data:t})),B={horizontal:{ranker:"tight-tree",direction:"horizontal",marginx:100,marginy:100,ranksep:60,rankdir:"LR",edgesep:90,nodesep:-10,nodeHeight:"auto",groupPaddingTop:65,groupPaddingBottom:-4,groupRendering:"if-varied",clusterpaddingtop:100},vertical:{ranker:"tight-tree",direction:"horizontal",marginx:100,marginy:100,ranksep:20,rankdir:"TB",nodesep:40,edgesep:10,nodeHeight:"auto",groupPaddingTop:55,groupPaddingBottom:-4,groupRendering:"if-varied"}},P=(e,t)=>{try{return R(e,t)}catch{try{return R(e,{...t,overrides:{ranker:"longest-path"}})}catch{return R(e,{...t,overrides:{ranker:"network-simplex"}})}}},R=(e,t)=>{let n=new E.graphlib.Graph({compound:!0}),o=Object.assign({},B[t.direction],t.overrides||{});n.setGraph(o),n.setDefaultEdgeLabel(()=>({}));let i=e=>e,a=Object.values(e.nodes).filter(i),r=new Set(e.expandedGroups||[]),s={};for(let e of a)if(e.definition.groupName){let t=L(e);s[t]=s[t]||{id:t,expanded:r.has(t),groupName:e.definition.groupName,repositoryName:e.definition.repository.name,repositoryLocationName:e.definition.repository.location.name,bounds:{x:0,y:0,width:0,height:0}}}let d="if-varied"!==o.groupRendering||Object.keys(s).length>1;d&&Object.keys(s).forEach(e=>{r.has(e)?n.setNode(e,{borderType:"borderRight"}):n.setNode(e,{width:J,height:110})}),a.forEach(e=>{if(!d||r.has(L(e))){let t="auto"===o.nodeHeight?z(e.definition):{width:J,height:o.nodeHeight};n.setNode(e.id,t),d&&e.definition.groupName&&n.setParent(e.id,L(e))}});let l={},h=Object.fromEntries(Object.entries(e.nodes).map(e=>{let[t,n]=e;return[t,L(n)]}));Object.entries(e.downstream).forEach(t=>{let[o,a]=t;Object.keys(a).forEach(t=>{if(!i(e.nodes[t])&&!i(e.nodes[o]))return;let a=o,s=t,u=h[t];d&&u&&!r.has(u)&&(s=u);let g=h[o];d&&g&&!r.has(g)&&(a=g),a!==s&&(n.setEdge({v:a,w:s},{weight:1}),i(e.nodes[t])?i(e.nodes[o])||(l[o]=!0):l[t]=!0)})}),Object.keys(l).forEach(e=>{let o=JSON.parse(e),i=o[o.length-1]||"";n.setNode(e,G(i,t))}),E.layout(n);let u=1,g=1,p={};if(n.nodes().forEach(e=>{let t=n.node(e);if(!(null==t?void 0:t.x)||!(null==t?void 0:t.width))return;let o={x:t.x-t.width/2,y:t.y-t.height/2,width:t.width,height:t.height};F(e)?r.has(e)||(s[e].bounds=o):p[e]={id:e,bounds:o},u=Math.max(u,t.x+t.width/2),g=Math.max(g,t.y+t.height/2)}),d){for(let e of a){let t=p[e.id];if(t&&e.definition.groupName){let n=s[L(e)];n.bounds=0===n.bounds.width?t.bounds:I(n.bounds,t.bounds)}}for(let e of Object.values(s))e.expanded&&(e.bounds=C(e.bounds,{x:15,top:o.groupPaddingTop,bottom:o.groupPaddingBottom}))}let f=[];return n.edges().forEach(e=>{let o=n.node(e.v),i=n.node(e.w);if(!o||!i)return;let a=l[e.v]?16:24,r=l[e.w]?16:24;f.push("horizontal"===t.direction?{from:{x:o.x+o.width/2,y:o.y},fromId:e.v,to:{x:i.x-i.width/2-5,y:i.y},toId:e.w}:{from:{x:o.x-o.width/2+a,y:o.y-30+o.height/2},fromId:e.v,to:{x:i.x-i.width/2+r,y:i.y+20-i.height/2},toId:e.w})}),{nodes:p,edges:f,width:u+100,height:g+100,groups:d?s:{}}},G=(e,t)=>"horizontal"===t.direction?{width:32+7.1*Math.min(30,e.length),height:50}:{width:106,height:50},C=(e,t)=>({x:e.x-t.x,y:e.y-t.top,width:e.width+2*t.x,height:e.height+t.top+t.bottom}),I=(e,t)=>{let n=Math.min(e.x,t.x),o=Math.min(e.y,t.y);return{x:n,y:o,width:Math.max(e.x+e.width,t.x+t.width)-n,height:Math.max(e.y+e.height,t.y+t.height)-o}},J=320,z=e=>{let t;return t=104,e.isPartitioned&&e.isMaterializable&&(t+=25),{width:J,height:t+=78}},H=e=>"result"!==e.solid.name?"".concat(e.solid.name,":").concat(e.definition.name):e.solid.name;function W(e){let t={};return e.forEach(e=>e.forEach(e=>t[H(e)]=e)),Object.values(t)}function U(e,t,n){let o=n-166,i=Math.max(200,o/e.length),a=83+Math.min(0,(o-e.length*i)/2),r=i<300?20:0,s={};return e.forEach((e,n)=>{s[H(e)]={x:a+n*i,y:t+r*(1-n%2*2)}}),s}function K(e,t){let n=t.y,o=(e,o,i)=>{let a;let r=[...e].sort((e,t)=>o(e).localeCompare(o(t))),s=0,d=null,l={},h=Math.min(35,370/(r.length+1));r.forEach((e,o)=>{let r=i(e);r!==d?(d=r,a={port:{x:t.x+s+13,y:n+13},collapsed:[],label:!1,layout:{x:t.x+s,y:n,width:35,height:26}},l[e.definition.name]=a,s+=h):(0===a.collapsed.length&&(s+=15),a.collapsed.push(e.definition.name))});let u=(370-(s-13+35))/2;return Object.values(l).forEach(e=>{e.layout.x+=u,e.port.x+=u}),n+=26,l},i=e=>{let o={};return e.forEach(e=>{o[e.definition.name]={port:{x:t.x+13,y:n+13},label:!0,collapsed:[],layout:{x:t.x,y:n,width:0,height:26}},n+=26}),o},a=e.inputs.length>4?o(e.inputs,e=>e.definition.name,e=>{var t;return(null===(t=e.dependsOn[0])||void 0===t?void 0:t.solid.name)||""}):i(e.inputs),r={x:t.x,y:Math.max(t.y,n-0),width:370,height:52};n+=52,e.definition.assetNodes.length&&e.definition.description&&(r.height+=22,n+=22);let s=e.outputs.length>4?o(e.outputs,e=>{var t;return(null===(t=e.dependedBy[0])||void 0===t?void 0:t.definition.name)||""},e=>{var t;return(null===(t=e.dependedBy[0])||void 0===t?void 0:t.solid.name)||""}):i(e.outputs);return{bounds:{x:t.x-5,y:t.y-5,width:380,height:n-t.y+10},op:r,inputs:a,outputs:s}}h=async(e,t)=>{switch(t.type){case"layoutOpGraph":{let{ops:n,opts:o}=t;e(function(e,t){let n=new E.graphlib.Graph,o=0,i=100,a=100;t.parentOp&&(i=(a=140)+(o=26*Math.max(t.parentOp.inputs.length,t.parentOp.outputs.length))),n.setGraph({rankdir:"TB",marginx:a,marginy:i,ranker:"tight-tree"}),n.setDefaultEdgeLabel(()=>({}));let r=[],s={};e.forEach(e=>{s[e.name]=!0}),e.forEach(e=>{let t=K(e,{x:0,y:0});n.setNode(e.name,{width:t.bounds.width,height:t.bounds.height}),e.inputs.forEach(t=>{t.dependsOn.forEach(o=>{s[o.solid.name]&&s[e.name]&&(n.setEdge({v:o.solid.name,w:e.name},{weight:1}),r.push({from:{point:{x:0,y:0},opName:o.solid.name,edgeName:o.definition.name},to:{point:{x:0,y:0},opName:e.name,edgeName:t.definition.name}}))})})}),E.layout(n);let d={},l={};n.nodes().forEach(function(e){let t=n.node(e);t&&(l[e]=t)});let h=0,u=0;Object.entries(l).forEach(t=>{let[n,o]=t,i=e.find(e=>{let{name:t}=e;return t===n});if(!i)return;let a=o.x-o.width/2,r=o.y-o.height/2;d[n]=K(i,{x:a,y:r}),h=Math.max(h,a+o.width),u=Math.max(u,r+o.height)}),n.edges().forEach(function(e){let t=r.find(t=>t.from.opName===e.v&&t.to.opName===e.w),o=n.edge(e).points;t&&o.length>0&&(t.from.point=o[0],t.to.point=o[o.length-1])});let g={edges:r,nodes:d,width:h+a,height:u+i,parent:null};return t.parentOp&&(g.parent=function(e,t,n){let o={invocationBoundingBox:{x:1,y:1,width:e.width-1,height:e.height-1},bounds:{x:70,y:70+n,width:e.width-140,height:e.height-(70+n)*2},mappingLeftEdge:50,mappingLeftSpacing:10,inputs:{},outputs:{},dependsOn:U(W(t.inputs.map(e=>e.dependsOn)),-50,e.width),dependedBy:U(W(t.outputs.map(e=>e.dependedBy)),e.height+50,e.width)},i=o.bounds.y+o.bounds.height;return t.inputs.forEach((e,t)=>{o.inputs[e.definition.name]={layout:{x:o.bounds.x,y:o.bounds.y-26*t-26,width:0,height:26},collapsed:[],label:!0,port:{x:o.bounds.x+13,y:o.bounds.y-26*t-13}}}),t.outputs.forEach((e,t)=>{o.outputs[e.definition.name]={layout:{x:o.bounds.x,y:i+26*t,width:0,height:26},collapsed:[],label:!0,port:{x:o.bounds.x+13,y:i+26*t+13}}}),o}(g,t.parentOp,o)),g}(n,o));break}case"layoutAssetGraph":{let{graphData:n,opts:o}=t;e(P(n,o))}}},u=(e,t)=>{console.error(t)},self.addEventListener("message",async e=>{try{e.data[i]?s(e.data[i]):await h(self.postMessage,e.data)}catch(e){e instanceof Error?self.postMessage({type:"error",error:e.message,stack:e.stack}):self.postMessage({type:"error",error:String(e),stack:void 0}),u(self.postMessage,e)}})}}]);
//# sourceMappingURL=330.0b070cdb8df923b6.js.map