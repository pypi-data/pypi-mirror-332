import{ca as h,d as b,e as k,W as I,al as F,cb as N,ae as S,g as x,k as e,c as D,h as d,a as P,i as B,u as J,o as O,j as p,cc as T,cd as U,ce as V,cf as W,bk as i,P as f,I as j}from"./index-BpfyxaoD.js";import{u as z}from"./usePageTitle-BARztYm3.js";class M extends h{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const $=b({__name:"FlowRunCreate",setup(y){const t=k(),l=I("deploymentId"),c=J(),_=F("parameters",M,void 0),{deployment:a}=N(l),o=S(!1),w=async u=>{var m,s;if(!o.value)try{o.value=!0;const n=await t.deployments.createDeploymentFlowRun(l.value,u),r=((s=(m=u.state)==null?void 0:m.stateDetails)==null?void 0:s.scheduledTime)??void 0,C=!r,g=V(W,{flowRun:n,flowRunRoute:i.flowRun,router:c,immediate:C,startTime:r});f(g,"success"),c.push(i.deployment(l.value))}catch(n){const r=j(n,"Something went wrong trying to create a flow run");f(r,"error"),console.error(n)}finally{o.value=!1}},R=()=>{c.back()},v=x(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return z(v),(u,m)=>{const s=B("p-layout-default");return e(a)?(O(),D(s,{key:0},{header:d(()=>[p(e(T),{deployment:e(a)},null,8,["deployment"])]),default:d(()=>[p(e(U),{deployment:e(a),parameters:e(_),disabled:o.value,onSubmit:w,onCancel:R},null,8,["deployment","parameters","disabled"])]),_:1})):P("",!0)}}});export{$ as default};
//# sourceMappingURL=FlowRunCreate-CgbGjY5e.js.map
