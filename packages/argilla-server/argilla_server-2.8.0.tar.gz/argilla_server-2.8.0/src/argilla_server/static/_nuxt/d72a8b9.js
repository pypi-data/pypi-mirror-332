(window.webpackJsonp=window.webpackJsonp||[]).push([[139,138],{1046:function(t,i,e){e(144).register({"external-link":{width:40,height:40,viewBox:"0 0 40 40",data:'<path pid="0" d="M27.78 9.368h-7.741V5.093H35v14.961h-4.275v-7.587L20.223 22.969 17.2 19.948l10.58-10.58z" _fill="#000"/><path pid="1" d="M17.824 9.259H5v25.648h25.648V22.083h-4.275v8.549H9.275V13.533h8.549V9.26z" _fill="#000"/>'}})},1047:function(t,i,e){e(144).register({refresh:{width:40,height:40,viewBox:"0 0 40 40",data:'<path pid="0" d="M33.861 17.47L30.521 5 26.98 8.54C20.5 4.458 11.836 5.238 6.193 10.882l2.635 2.635c4.178-4.178 10.485-4.93 15.429-2.253l-2.865 2.864 12.47 3.341zM6.139 22.53L9.479 35l3.541-3.54c6.48 4.082 15.144 3.302 20.787-2.342l-2.635-2.635c-4.178 4.178-10.485 4.93-15.429 2.253l2.865-2.864-12.47-3.341z" _fill="#000"/>'}})},1082:function(t,i,e){"use strict";e.r(i);var s=e(17),o=(e(10),e(118),e(1046),e(1047),{props:{datasetId:{type:String,required:!0},record:{type:Object,required:!0},showDiscardButton:{type:Boolean,default:!0},areActionsEnabled:{type:Boolean,default:!0},isSubmitting:{type:Boolean,required:!0},isDiscarding:{type:Boolean,required:!0},isDraftSaving:{type:Boolean,required:!0},isSubmitDisabled:{type:Boolean,default:!1},isDiscardDisabled:{type:Boolean,default:!1},isDraftSaveDisabled:{type:Boolean,default:!1},submitTooltip:{type:String,default:null},discardTooltip:{type:String,default:null},draftSavingTooltip:{type:String,default:null},progress:{type:Number,default:0},enableAutoSubmitWithKeyboard:{type:Boolean,default:!1},isBulkMode:{type:Boolean,default:!1}},data:function data(){return{autofocusPosition:0,interactionCount:0,isSubmittedTouched:!1,userComesFromOutside:!1}},computed:{questionFormClass:function questionFormClass(){return this.isSubmitting?"--submitting --waiting":this.isDiscarding?"--discarding --waiting":this.isDraftSaving?"--saving-draft":this.isSubmittedTouched||this.formHasFocus&&this.interactionCount>1?"--focused-form":void 0},formHasFocus:function formHasFocus(){return this.autofocusPosition||0==this.autofocusPosition},numberOfQuestions:function numberOfQuestions(){return this.record.questions.length},questionAreCompletedCorrectly:function questionAreCompletedCorrectly(){return this.record.questionAreCompletedCorrectly()},isSaving:function isSaving(){return this.isDraftSaving||this.isDiscarding||this.isSubmitting}},watch:{record:{deep:!0,immediate:!0,handler:function handler(){this.isSubmittedTouched=this.record.isSubmitted&&this.record.isModified}}},mounted:function mounted(){document.addEventListener("keydown",this.handleGlobalKeys)},destroyed:function destroyed(){document.removeEventListener("keydown",this.handleGlobalKeys)},methods:{autoSubmitWithKeyboard:function autoSubmitWithKeyboard(t){var i=this;return Object(s.a)(regeneratorRuntime.mark((function _callee(){var e;return regeneratorRuntime.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:if(i.enableAutoSubmitWithKeyboard){s.next=2;break}return s.abrupt("return");case 2:if(i.record.isModified){s.next=4;break}return s.abrupt("return");case 4:if(!(i.record.questions.length>1)){s.next=6;break}return s.abrupt("return");case 6:if(!isNaN(parseInt(t))){s.next=8;break}return s.abrupt("return");case 8:if(!(e=i.record.questions[0]).isSingleLabelType&&!e.isRatingType){s.next=12;break}return s.next=12,i.onSubmit();case 12:case"end":return s.stop()}}),_callee)})))()},focusOnFirstQuestionFromOutside:function focusOnFirstQuestionFromOutside(t){this.userComesFromOutside&&(t.srcElement.id||t.srcElement.getAttribute("for")||(this.userComesFromOutside=!1,this.updateQuestionAutofocus(0)))},focusOnFirstQuestion:function focusOnFirstQuestion(t){t.preventDefault(),this.updateQuestionAutofocus(0)},onClickOutside:function onClickOutside(){this.autofocusPosition=null,this.userComesFromOutside=!0},handleGlobalKeys:function handleGlobalKeys(t){var i=t.code,e=t.ctrlKey,s=t.metaKey,o=t.shiftKey,n=t.key;if(!o)if("Tab"===i&&this.userComesFromOutside)this.focusOnFirstQuestion(t);else if(this.areActionsEnabled)switch(i){case"KeyS":if(this.$platform.isMac){if(!s)return}else if(!e)return;t.preventDefault(),t.stopPropagation(),this.onSaveDraft();break;case"Enter":this.onSubmit();break;case"Backspace":this.onDiscard();break;default:this.autoSubmitWithKeyboard(n)}},onSubmit:function onSubmit(){this.isSubmitDisabled||this.isSaving||!this.questionAreCompletedCorrectly||this.$emit("on-submit-responses")},onDiscard:function onDiscard(){this.isDiscardDisabled||this.isSaving||this.$emit("on-discard-responses")},onSaveDraft:function onSaveDraft(){this.isDraftSaveDisabled||this.isSaving||this.$emit("on-save-draft")},updateQuestionAutofocus:function updateQuestionAutofocus(t){this.interactionCount++,this.autofocusPosition=Math.min(this.numberOfQuestions-1,Math.max(0,t))}}}),n=(e(1099),e(26)),a=Object(n.a)(o,(function render(){var t=this,i=t._self._c;return i("form",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"questions-form",class:t.questionFormClass,attrs:{"aria-label":"Annotation Questions"},on:{submit:function submit(t){t.stopPropagation(),t.preventDefault()},click:t.focusOnFirstQuestionFromOutside}},[i("div",{staticClass:"questions-form__content"},[i("QuestionsComponent",{attrs:{questions:t.record.questions,autofocusPosition:t.autofocusPosition,"is-bulk-mode":t.isBulkMode},on:{"on-focus":t.updateQuestionAutofocus}})],1),t._v(" "),i("div",{staticClass:"footer-form"},[i("div",{staticClass:"footer-form__content"},[t.showDiscardButton||t.isDiscarding?i("BaseButton",{staticClass:"button--discard",class:t.isDiscarding?"--button--discarding":null,attrs:{type:"button",loading:t.isDiscarding,"loading-progress":t.progress,disabled:t.isDiscardDisabled||t.isSaving||!t.record.id,"data-title":t.isSaving?null:t.draftSavingTooltip},on:{"on-click":t.onDiscard}},[t.isDiscarding?t._e():i("span",{staticClass:"button__shortcuts",domProps:{textContent:t._s("⌫")}}),i("span",{domProps:{textContent:t._s(t.$t("questions_form.discard"))}})]):t._e(),t._v(" "),i("BaseButton",{staticClass:"button--draft",class:t.isDraftSaving?"--button--saving-draft":null,attrs:{type:"button",loading:t.isDraftSaving,"loading-progress":t.progress,disabled:t.isDraftSaveDisabled||t.isSaving||!t.record.id,"data-title":t.isSaving?null:t.draftSavingTooltip},on:{"on-click":t.onSaveDraft}},[t.isDraftSaving?t._e():i("span",[i("span",{staticClass:"button__shortcuts",domProps:{textContent:t._s(t.$platform.isMac?"⌘":"ctrl")}}),i("span",{staticClass:"button__shortcuts",domProps:{textContent:t._s("S")}})]),t._v(" "),i("span",{domProps:{textContent:t._s(t.$t("questions_form.draft"))}})]),t._v(" "),i("BaseButton",{staticClass:"button--submit",class:[t.isSubmitting?"--button--submitting":null,t.isDiscarding||t.isDraftSaving?"--button--remove-bg":null],attrs:{type:"submit","loading-progress":t.progress,loading:t.isSubmitting,disabled:!t.questionAreCompletedCorrectly||t.isSubmitDisabled||t.isSaving||!t.record.id,"data-title":t.record.id?t.isSaving?null:t.questionAreCompletedCorrectly||t.isSubmitDisabled?t.submitTooltip:t.$t("to_submit_complete_required"):null},on:{"on-click":t.onSubmit}},[t.isSubmitting?t._e():i("span",{staticClass:"button__shortcuts",domProps:{textContent:t._s("↵")}}),t._v(" "),i("span",{domProps:{textContent:t._s(t.$t("questions_form.submit"))}})])],1)])])}),[],!1,null,"74144a3a",null);i.default=a.exports;installComponents(a,{QuestionsComponent:e(979).default,BaseButton:e(259).default})},1099:function(t,i,e){"use strict";e(968)},824:function(t,i,e){e(144).register({suggestion:{width:12,height:12,viewBox:"0 0 12 12",data:'<path pid="0" d="M11.787 6.654l-2.895-1.03-1.081-3.403A.324.324 0 007.5 2c-.143 0-.27.09-.311.221l-1.08 3.404-2.897 1.03A.313.313 0 003 6.946c0 .13.085.248.212.293l2.894 1.03 1.082 3.507A.324.324 0 007.5 12c.144 0 .271-.09.312-.224L8.893 8.27l2.895-1.029A.313.313 0 0012 6.947a.314.314 0 00-.213-.293zM4.448 1.77l-1.05-.39-.39-1.05a.444.444 0 00-.833 0l-.39 1.05-1.05.39a.445.445 0 000 .833l1.05.389.39 1.051a.445.445 0 00.833 0l.39-1.051 1.05-.389a.445.445 0 000-.834z" _fill="#fff"/>'}})},968:function(t,i,e){t.exports={}}}]);