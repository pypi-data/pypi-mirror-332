(window.webpackJsonp=window.webpackJsonp||[]).push([[2,30,76,99,101,102,121,138],{1042:function(e,t,n){e.exports={}},1142:function(e,t,n){"use strict";n(1042)},1154:function(e,t,n){"use strict";n.r(t);var i=n(0),o={props:{text:{type:String,required:!0},activeBadge:{type:Boolean,default:!1},color:{type:String,required:!0}},data:function data(){return{renderComponent:"p",clickable:!1,clearable:!1}},mounted:function mounted(){this.$listeners["on-click"]&&(this.clickable=!0,this.renderComponent="baseButton"),this.$listeners["on-clear"]&&(this.clearable=!0)},methods:{onClick:function onClick(e){this.$emit("on-click",e)},onClear:function onClear(e){this.$emit("on-clear",e)}}},s=function __injectCSSVars__(){Object(i.useCssVars)((function(e,t){return{"01630f76":e.color,"44d6da68":e.color.palette.veryDark}}))},r=o.setup;o.setup=r?function(e,t){return s(),r(e,t)}:s;var a=o,c=(n(1142),n(26)),l=Object(c.a)(a,(function render(){var e=this,t=e._self._c;return t(e.renderComponent,{tag:"component",class:[e.clickable?"badge--clickable":"badge",e.activeBadge?"badge--active":"badge"],on:{click:function click(t){return e.onClick(t)}}},[t("span",{staticClass:"badge__text"},[e._v(e._s(e.text))]),e._v(" "),e.clearable?t("BaseButton",{staticClass:"badge__button",on:{click:function click(t){return e.onClear(t)}}},[t("svgicon",{attrs:{name:"close",width:"10",height:"10",color:"rgba(0, 0, 0, 0.54)"}})],1):e._e()],1)}),[],!1,null,"8358eb4a",null);t.default=l.exports;installComponents(l,{BaseButton:n(259).default})},1213:function(e,t,n){e.exports={}},1214:function(e,t,n){e.exports={}},1270:function(e,t,n){"use strict";n(1213)},1271:function(e,t,n){"use strict";n(1214)},1295:function(e,t,n){e.exports={}},1343:function(e,t,n){"use strict";n.r(t);n(34),n(60),n(48),n(23),n(4),n(24),n(53),n(146),n(32);var i={name:"EntityComponent",props:{options:{type:Array,required:!0},spanInRange:{type:Array,required:!0}},data:function data(){return{searchText:"",preSelectionIndex:0,selection:[]}},computed:{filteredOptions:function filteredOptions(){var e=this;return this.options.filter((function(t){return t.text.toLowerCase().includes(e.searchText.toLowerCase())}))},optionsLength:function optionsLength(){return this.filteredOptions.length}},methods:{selectOptions:function selectOptions(){var e=this;this.spanInRange.filter((function(t){var n=t.entity;return!e.selection.map((function(e){return e.id})).includes(n.id)})).forEach((function(t){e.$emit("on-remove-span",t)})),this.selection.filter((function(t){return!e.spanInRange.some((function(e){return e.entity.id===t.id}))})).forEach((function(t){e.$emit("on-add-span-base-on",e.spanInRange[0],t)}))},excludeOption:function excludeOption(e){this.selection=this.selection.filter((function(t){return t.id!==e.id}))},excludeAll:function excludeAll(){this.selection=[]},includeOption:function includeOption(e){this.selection.push(e)},includePreselectedOption:function includePreselectedOption(){var e=this.filteredOptions[this.preSelectionIndex];this.filteredOptions.length&&(this.selection.includes(e)?this.excludeOption(e):this.includeOption(e),this.preSelectionIndex=0)},preselectNextOption:function preselectNextOption(){this.preSelectionIndex===this.optionsLength-1?this.preSelectionIndex=0:this.preSelectionIndex++},preselectPreviousOption:function preselectPreviousOption(){0===this.preSelectionIndex?this.preSelectionIndex=this.optionsLength-1:this.preSelectionIndex--}},watch:{searchText:function searchText(){this.preSelectionIndex=0},selection:function selection(){var e=this;this.$nextTick((function(){e.$refs.search.focus()}))}},mounted:function mounted(){var e=this;this.preselectedEntity=this.filteredOptions[0],this.selection=this.spanInRange.map((function(t){var n=t.entity;return e.options.find((function(e){return e.id===n.id}))})),this.$refs.search.focus()}},o=(n(1270),n(26)),s=Object(o.a)(i,(function render(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.selectOptions,expression:"selectOptions"}],staticClass:"span-entity__dropdown",on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.includePreselectedOption.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.preselectPreviousOption.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.preselectNextOption.apply(null,arguments)}]}},[t("div",{staticClass:"span-entity__dropdown__header"},[t("div",{staticClass:"span-entity__badges"},e._l(e.selection,(function(n){return t("EntityBadge",{key:n.id,staticClass:"span-entity__badge--active",attrs:{color:n.color,text:n.text},on:{"on-clear":function onClear(t){return e.excludeOption(n)}}},[e._v(e._s(n))])})),1),e._v(" "),e.selection.length?t("BaseButton",{staticClass:"span-entity__badges__close-button",attrs:{title:"Clear all"},on:{click:e.excludeAll}},[t("svgicon",{staticClass:"span-entity__badges__close-button__icon",attrs:{name:"close",width:"10",height:"10"}})],1):e._e(),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],ref:"search",staticClass:"span-entity__input",attrs:{type:"text",autocomplete:"off",placeholder:e.selection.length?"":e.$nuxt.$t("search"),autofocus:""},domProps:{value:e.searchText},on:{keydown:function keydown(e){e.stopPropagation()},input:function input(t){t.target.composing||(e.searchText=t.target.value)}}})],1),e._v(" "),t("ul",{staticClass:"span-entity__dropdown__content"},[t("li",e._l(e.filteredOptions,(function(n,i){return t("BaseCheckbox",{key:n.id,staticClass:"span-entity__dropdown__item",class:{"--preselected":e.preSelectionIndex===i},attrs:{value:n},nativeOn:{mouseover:function mouseover(t){e.preSelectionIndex=i}},model:{value:e.selection,callback:function callback(t){e.selection=t},expression:"selection"}},[t("EntityBadge",{staticClass:"span-entity__badge",attrs:{color:n.color,text:n.text}})],1)})),1)])])}),[],!1,null,"360e7a13",null);t.default=s.exports;installComponents(s,{EntityBadge:n(1154).default,BaseButton:n(259).default,BaseCheckbox:n(806).default})},1344:function(e,t,n){"use strict";n.r(t);n(34),n(48),n(4),n(24),n(53),n(146);var i={name:"EntityComponent",props:{selectedOption:{type:Object,required:!0},options:{type:Array,required:!0}},data:function data(){return{searchText:"",preSelectionIndex:0}},computed:{filteredOptions:function filteredOptions(){var e=this;return this.availableOptions.filter((function(t){return t.text.toLowerCase().includes(e.searchText.toLowerCase())}))},availableOptions:function availableOptions(){var e=this;return this.options.filter((function(t){return t.id!==e.selectedOption.id}))},optionsLength:function optionsLength(){return this.filteredOptions.length}},methods:{selectOption:function selectOption(e){this.$emit("on-replace-entity",e)},includePreselectedOption:function includePreselectedOption(){this.filteredOptions.length&&(this.selectOption(this.filteredOptions[this.preSelectionIndex]),this.preSelectionIndex=0)},preselectNextOption:function preselectNextOption(){this.preSelectionIndex===this.optionsLength-1?this.preSelectionIndex=0:this.preSelectionIndex++},preselectPreviousOption:function preselectPreviousOption(){0===this.preSelectionIndex?this.preSelectionIndex=this.optionsLength-1:this.preSelectionIndex--}},watch:{searchText:function searchText(){this.preSelectionIndex=0}},mounted:function mounted(){this.preselectedEntity=this.filteredOptions[0],this.$refs.search.focus()}},o=(n(1271),n(26)),s=Object(o.a)(i,(function render(){var e=this,t=e._self._c;return t("div",{staticClass:"span-entity__dropdown",on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.includePreselectedOption.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.preselectPreviousOption.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.preselectNextOption.apply(null,arguments)}]}},[t("div",{staticClass:"span-entity__dropdown__header"},[t("EntityBadge",{staticClass:"span-entity__badge--active",attrs:{color:e.selectedOption.color,text:e.selectedOption.text}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],ref:"search",staticClass:"span-entity__input",attrs:{type:"text",autocomplete:"off",placeholder:"",autofocus:""},domProps:{value:e.searchText},on:{keydown:function keydown(e){e.stopPropagation()},input:function input(t){t.target.composing||(e.searchText=t.target.value)}}})],1),e._v(" "),t("ul",{staticClass:"span-entity__dropdown__content"},[t("li",e._l(e.filteredOptions,(function(n,i){return t("BaseButton",{key:n.id,staticClass:"span-entity__dropdown__item",class:{"--preselected":e.preSelectionIndex===i},on:{click:function click(t){return e.selectOption(n)}},nativeOn:{mouseover:function mouseover(t){e.preSelectionIndex=i}}},[t("EntityBadge",{staticClass:"span-entity__badge",attrs:{color:n.color,text:n.text}})],1)})),1)])])}),[],!1,null,"2a121b09",null);t.default=s.exports;installComponents(s,{EntityBadge:n(1154).default,BaseButton:n(259).default})},1364:function(e,t,n){"use strict";n(1295)},1412:function(e,t,n){"use strict";n.r(t);n(60),n(261),n(4),n(814),n(415),n(824);var i=n(0),o={name:"EntityComponent",props:{span:{type:Object,required:!0},entity:{type:Object,required:!0},spanQuestion:{type:Object,required:!0},suggestion:{type:Object},entityPosition:{type:Object,required:!0},spanInRange:{type:Array,required:!0}},data:function data(){return{visibleDropdown:!1,spanEntityPosition:{left:0,top:0}}},computed:{selectedOption:function selectedOption(){var e=this;return this.options.find((function(t){return t.id===e.entity.id}))},options:function options(){return this.spanQuestion.answer.options},singleOption:function singleOption(){return 1===this.options.length},suggestedScore:function suggestedScore(){var e;return null===(e=this.suggestion)||void 0===e||null===(e=e.value.score)||void 0===e?void 0:e.fixed},entityColor:function entityColor(){return this.entity.color},allowOverlapping:function allowOverlapping(){return this.spanQuestion.settings.allow_overlapping},lines:function lines(){for(var lines=[],e=this.entityPosition,t=e.width,n=e.top,i=e.topEnd,o=e.left,s=e.right,r=i-n,a=r>0?this.getNumberOfLines(r):0,c=0;c<=a;c++)lines.push({width:"".concat(a?0===c?t-o:c===a?s:t:t,"px"),left:0===c?"".concat(o,"px"):0,top:"".concat(n+c*this.entityPosition.lineHeight,"px")});return lines},entityWidth:function entityWidth(){return"".concat(this.entityPosition.width,"px")},entityRelativePosition:function entityRelativePosition(){return{left:"".concat(this.entityPosition.left,"px"),top:"".concat(this.entityPosition.top,"px")}},entityFixedPosition:function entityFixedPosition(){return{left:"".concat(this.spanEntityPosition.left,"px"),top:"".concat(this.spanEntityPosition.top,"px")}},getLevelInEntitiesInRange:function getLevelInEntitiesInRange(){var e=this;return this.spanInRange.findIndex((function(t){return t.entity.id===e.entity.id}))},overlappingDropdownPosition:function overlappingDropdownPosition(){return{left:"".concat(this.spanEntityPosition.left,"px"),top:"".concat(this.spanEntityPosition.top-this.getLevelInEntitiesInRange*this.entityPosition.baseEntityGap,"px")}}},methods:{getNumberOfLines:function getNumberOfLines(e){return Math.floor(e/this.entityPosition.lineHeight+1)},addSpanBaseOn:function addSpanBaseOn(e,t){this.$emit("on-add-span-base-on",e,t),this.hideDropdown()},selectEntity:function selectEntity(e){this.$emit("on-replace-entity",e),this.hideDropdown()},removeSelectedSpan:function removeSelectedSpan(e){this.$emit("on-remove-span",e),this.hideDropdown()},hoverSpan:function hoverSpan(e){this.getPosition(),this.allowOverlapping&&this.$emit("on-hover-span",e)},toggleDropdown:function toggleDropdown(){this.visibleDropdown=!this.visibleDropdown,this.getPosition()},hideDropdown:function hideDropdown(){this.visibleDropdown=!1},getPosition:function getPosition(){var e=this.$refs.spanEntityRef.getBoundingClientRect();this.spanEntityPosition.left=e.left,this.spanEntityPosition.top=e.top+this.$refs.spanEntityRef.scrollTop},getScrollParent:function getScrollParent(e){if(e){for(var t=e.parentElement;t;){if(window.getComputedStyle(t)["overflow-y"].split(" ").every((function(e){return"auto"===e||"scroll"===e})))return t;t=t.parentElement}return document.documentElement}}},mounted:function mounted(){var e=this;this.$nextTick((function(){e.scroll=e.getScrollParent(document.getElementById("spanEntity")),e.scroll&&e.scroll.addEventListener("scroll",e.getPosition)}))},beforeDestroy:function beforeDestroy(){this.scroll&&this.scroll.removeEventListener("scroll",this.getPosition)}},s=function __injectCSSVars__(){Object(i.useCssVars)((function(e,t){return{aad32e44:e.entityWidth,ad012b0a:e.entityColor,c1a44a1c:e.entityColor.palette.veryDark,"377fbb00":e.entityFixedPosition.left,"496d8bbc":e.entityFixedPosition.top,"1bbdefec":e.selectedOption.color}}))},r=o.setup;o.setup=r?function(e,t){return s(),r(e,t)}:s;var a=o,c=(n(1364),n(26)),l=Object(c.a)(a,(function render(){var e=this,t=e._self._c;return t("span",{staticClass:"span-entity__wrapper",attrs:{role:"mark"}},[e.allowOverlapping?e._l(e.lines,(function(e,n){return t("span",{key:n,staticClass:"span-entity__line",style:{width:e.width,left:e.left,top:e.top}})})):e._e(),e._v(" "),t("div",{ref:"spanEntityRef",staticClass:"span-entity__container",style:e.entityRelativePosition,attrs:{id:"spanEntity"}},[e.visibleDropdown?[e.allowOverlapping?t("EntityDropdownOverlapping",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideDropdown,expression:"hideDropdown"}],style:e.overlappingDropdownPosition,attrs:{selectedOption:e.selectedOption,options:e.options,spanInRange:e.spanInRange},on:{"on-add-span-base-on":e.addSpanBaseOn,"on-remove-span":e.removeSelectedSpan}}):t("EntityDropdown",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideDropdown,expression:"hideDropdown"}],style:e.entityFixedPosition,attrs:{selectedOption:e.selectedOption,options:e.options},on:{"on-replace-entity":e.selectEntity}})]:t("div",e._g({class:[e.singleOption?"span-entity":"span-entity--clickable",e.allowOverlapping?"span-entity--overlapping":null],on:{mouseenter:function mouseenter(t){return e.hoverSpan(!0)},mouseleave:function mouseleave(t){return e.hoverSpan(!1)}}},e.singleOption?{}:{click:e.toggleDropdown}),[t("BaseButton",{staticClass:"span-entity__close-button",on:{click:function click(t){return t.stopPropagation(),e.removeSelectedSpan(e.span)}}},[t("svgicon",{attrs:{name:"close",width:"10",height:"10",color:"#fff"}})],1),e._v(" "),t("span",{staticClass:"span-entity__text"},[t("span",{domProps:{textContent:e._s(e.selectedOption.text)}})]),e._v(" "),e.suggestion?t("svgicon",{class:e.suggestedScore?"span-entity__suggestion--score":"span-entity__suggestion",attrs:{name:"suggestion",width:"8",height:"8"}}):e._e(),e._v(" "),e.suggestedScore?t("span",{staticClass:"span-entity__score",domProps:{textContent:e._s(e.suggestedScore)}}):e._e()],1)],2)],2)}),[],!1,null,"0efcde62",null);t.default=l.exports;installComponents(l,{BaseButton:n(259).default,EntityDropdownOverlapping:n(1343).default,EntityDropdown:n(1344).default})},799:function(e,t,n){n(144).register({check:{width:40,height:40,viewBox:"0 0 40 40",data:'<path pid="0" d="M16.25 23.75l-7.5-7.5L5 20l11.25 11.25L35 12.5l-3.75-3.75-15 15z" _fill="#000"/>'}})},800:function(e,t,n){e.exports={}},806:function(e,t,n){"use strict";n.r(t);n(60),n(261),n(48),n(39),n(145),n(118),n(4),n(53),n(799);var i=n(216),o=n.n(i),s={model:{prop:"areChecked",event:"change"},props:{id:{type:String},disabled:{type:Boolean,default:!1},value:{type:[String,Number,Boolean,Object],default:!1},areChecked:{type:[Array,Boolean],default:!1},decorationCircle:{type:Boolean,default:!1}},data:function data(){return{checked:this.value||!1}},computed:{classes:function classes(){return{checked:Array.isArray(this.areChecked)?Array.isArray(this.areChecked)?this.areChecked.includes(this.value):o.a.find(this.areChecked,this.value):this.checked,disabled:this.disabled,"decoration-circle":this.decorationCircle}}},watch:{value:function value(){this.checked=!!this.value},areChecked:function areChecked(e){"boolean"==typeof e&&(this.checked=e)}},methods:{toggleCheck:function toggleCheck(){if(!this.disabled)if(Array.isArray(this.areChecked)){var e=this.areChecked.slice(),t="string"==typeof this.value?e.indexOf(this.value):o.a.findIndex(e,this.value);-1!==t?e.splice(t,1):e.push(this.value),this.$emit("change",e)}else{this.checked=!this.checked;var n=this.areChecked;n=this.checked,this.$emit("change",n),this.$emit("input",n)}}}},r=(n(834),n(26)),a=Object(r.a)(s,(function render(){var e=this,t=e._self._c;return t("div",{staticClass:"checkbox",class:[e.classes],on:{click:function click(t){return t.preventDefault(),e.toggleCheck.apply(null,arguments)}}},[e.$slots.default?t("label",{staticClass:"checkbox__label",attrs:{for:e.id}},[e._t("default")],2):e._e(),e._v(" "),t("div",{staticClass:"checkbox__container",attrs:{tabindex:"0"}},[t("input",{attrs:{id:e.id,type:"checkbox",disabled:e.disabled},domProps:{value:e.value,checked:e.checked}}),e._v(" "),t("svgicon",{attrs:{color:"#fffff",width:"12",name:"check"}})],1)])}),[],!1,null,"d69d744a",null);t.default=a.exports},824:function(e,t,n){n(144).register({suggestion:{width:12,height:12,viewBox:"0 0 12 12",data:'<path pid="0" d="M11.787 6.654l-2.895-1.03-1.081-3.403A.324.324 0 007.5 2c-.143 0-.27.09-.311.221l-1.08 3.404-2.897 1.03A.313.313 0 003 6.946c0 .13.085.248.212.293l2.894 1.03 1.082 3.507A.324.324 0 007.5 12c.144 0 .271-.09.312-.224L8.893 8.27l2.895-1.029A.313.313 0 0012 6.947a.314.314 0 00-.213-.293zM4.448 1.77l-1.05-.39-.39-1.05a.444.444 0 00-.833 0l-.39 1.05-1.05.39a.445.445 0 000 .833l1.05.389.39 1.051a.445.445 0 00.833 0l.39-1.051 1.05-.389a.445.445 0 000-.834z" _fill="#fff"/>'}})},834:function(e,t,n){"use strict";n(800)}}]);