(window.webpackJsonp=window.webpackJsonp||[]).push([[104,38,103,157],{783:function(e,t,o){o(144).register({"chevron-down":{width:41,height:40,viewBox:"0 0 41 40",data:'<path pid="0" d="M8.5 11l-3 3 15 15 15-15-3-3-12 12-12-12z" _fill="#000"/>'}})},787:function(e,t,o){"use strict";o.r(t);var n={props:{url:{type:String},icon:{type:String},iconColor:{type:String,default:function _default(){return"white"}},tooltip:{type:String},showBadge:{type:Boolean,default:!1},badgeVerticalPosition:{type:String},badgeHorizontalPosition:{type:String},badgeBorderColor:{type:String},badgeSize:{type:String,default:"22"}},methods:{onClickIcon:function onClickIcon(){this.$emit("click-icon")}}},i=o(26),s=Object(i.a)(n,(function render(){var e=this,t=e._self._c;return t("BaseButton",{staticClass:"icon-with-badge",attrs:{"data-title":e.tooltip,tabIndex:-1},on:{"on-click":e.onClickIcon}},[t("i",{directives:[{name:"badge",rawName:"v-badge",value:{showBadge:e.showBadge,verticalPosition:e.badgeVerticalPosition,horizontalPosition:e.badgeHorizontalPosition,borderColor:e.badgeBorderColor},expression:"{\n      showBadge: showBadge,\n      verticalPosition: badgeVerticalPosition,\n      horizontalPosition: badgeHorizontalPosition,\n      borderColor: badgeBorderColor,\n    }"}],key:e.showBadge,staticClass:"icon-wrapper"},[t("svgicon",{attrs:{name:e.icon,width:e.badgeSize,height:e.badgeSize,color:e.iconColor,"aria-label":e.icon+" icon"}})],1)])}),[],!1,null,null,null);t.default=s.exports;installComponents(s,{BaseButton:o(259).default})},801:function(e,t,o){e.exports={}},803:function(e,t,o){"use strict";o.r(t);var n={name:"SearchLabelComponent",props:{value:{type:String,default:function _default(){return""}},searchRef:{type:String,required:!0},placeholder:{type:String,default:function _default(){return""}}},computed:{searchInputRef:function searchInputRef(){return this.$refs[this.searchRef]}},methods:{looseFocus:function looseFocus(){this.searchInputRef.blur()},focusInSearch:function focusInSearch(){this.searchInputRef.focus()},resetValue:function resetValue(){this.value.length&&this.$emit("input","")}}},i=(o(835),o(26)),s=Object(i.a)(n,(function render(){var e=this,t=e._self._c;return t("div",{staticClass:"search-area",attrs:{"aria-label":"Search Labels"},on:{click:e.focusInSearch}},[t("BaseIconWithBadge",{ref:"iconSearchRef",staticClass:"search-area__icon --search",attrs:{icon:"search","show-badge":!1,iconColor:"#acacac","badge-vertical-position":"top","badge-horizontal-position":"right","badge-border-color":"white",tabindex:"-1","aria-hidden":"true"}}),e._v(" "),t("input",{ref:e.searchRef,staticClass:"search-input",attrs:{id:"searchLabel",type:"text",placeholder:e.placeholder,role:"search"},domProps:{value:e.value},on:{input:function input(t){return e.$emit("input",t.target.value)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-up",void 0,t.key,void 0)?null:(t.preventDefault(),e.looseFocus.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"arrow-down",void 0,t.key,void 0)?null:(t.preventDefault(),e.looseFocus.apply(null,arguments))},function(e){e.stopPropagation()}]}}),e._v(" "),e.value?t("BaseIconWithBadge",{ref:"iconCloseRef",staticClass:"search-area__icon --close",attrs:{icon:"close","show-badge":!1,iconColor:"#acacac","badge-vertical-position":"top","badge-horizontal-position":"right","badge-border-color":"white","aria-hidden":"true"},on:{"click-icon":e.resetValue}}):e._e()],1)}),[],!1,null,"13d36fde",null);t.default=s.exports;installComponents(s,{BaseIconWithBadge:o(787).default})},818:function(e,t,o){e.exports={}},832:function(e,t,o){e.exports={}},835:function(e,t,o){"use strict";o(801)},893:function(e,t,o){"use strict";o(818)},898:function(e,t,o){"use strict";o.r(t);o(41),o(39);var n=o(0),i={props:{option:{type:Object,required:!0},keyboards:{type:Object,default:function _default(){return{}}},visibleShortcuts:{type:Boolean,default:!0}},computed:{optionColor:function optionColor(){return this.option.color},optionVeryDarkColor:function optionVeryDarkColor(){return this.optionColor.palette.veryDark},optionDarkColor:function optionDarkColor(){return this.optionColor.palette.dark},optionLightColor:function optionLightColor(){return this.optionColor.palette.light},optionVeryLightColor:function optionVeryLightColor(){return this.optionColor.palette.veryLight}}},s=function __injectCSSVars__(){Object(n.useCssVars)((function(e,t){return{"0a55427c":e.optionDarkColor,"00f9ca34":e.optionVeryLightColor,"7ed5a644":e.optionLightColor,"0455b7d2":e.optionColor,"4a46bb34":e.optionVeryDarkColor}}))},r=i.setup;i.setup=r?function(e,t){return s(),r(e,t)}:s;var a=i,l=(o(893),o(26)),c=Object(l.a)(a,(function render(){var e=this,t=e._self._c;return t("div",{staticClass:"input-button",attrs:{role:"button","aria-label":e.option.text}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.option.isSelected,expression:"option.isSelected"}],ref:"inputRef",attrs:{type:"checkbox",name:e.option.text,id:e.option.id,"data-keyboard":e.keyboards[e.option.id]},domProps:{checked:Array.isArray(e.option.isSelected)?e._i(e.option.isSelected,null)>-1:e.option.isSelected},on:{change:[function(t){var o=e.option.isSelected,n=t.target,i=!!n.checked;if(Array.isArray(o)){var s=e._i(o,null);n.checked?s<0&&e.$set(e.option,"isSelected",o.concat([null])):s>-1&&e.$set(e.option,"isSelected",o.slice(0,s).concat(o.slice(s+1)))}else e.$set(e.option,"isSelected",i)},function(t){return e.$emit("on-selected")}],focus:function focus(t){return e.$emit("on-focus")},keydown:function keydown(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.$emit("on-expand-labels-on-tab")}}}),e._v(" "),t("label",{staticClass:"label-text",class:[{"label-active":e.option.isSelected},"label-".concat(e.option.id)],attrs:{for:e.option.id,title:e.option.text}},[e.visibleShortcuts?t("span",{staticClass:"key",domProps:{textContent:e._s(e.keyboards[e.option.id])}}):e._e(),e._v(" "),t("span",[e._v(e._s(e.option.text))])])])}),[],!1,null,"f172cb34",null);t.default=c.exports},919:function(e,t,o){"use strict";o(832)},935:function(e,t,o){"use strict";o.r(t);o(41),o(34),o(60),o(48),o(39),o(118),o(4),o(53),o(119),o(32),o(81),o(783),o(969);var n={name:"EntityLabelSelectionComponent",props:{maxOptionsToShowBeforeCollapse:{type:Number},options:{type:Array,required:!0},componentId:{type:String,required:!0},isFocused:{type:Boolean,default:function _default(){return!1}},enableSpanQuestionShortcutsGlobal:{type:Boolean,default:function _default(){return!1}},visibleShortcuts:{type:Boolean,default:!0}},model:{prop:"options",event:"on-change"},data:function data(){return{isOutside:!1,searchInput:"",isExpanded:!1,timer:null,keyCode:""}},created:function created(){this.searchRef="".concat(this.componentId,"SearchFilterRef")},watch:{isFocused:{immediate:!0,handler:function handler(e){var t=this;this.isOutside=!e,e&&this.$nextTick((function(){var e,o,n=null===(e=t.$refs)||void 0===e?void 0:e.options;n.some((function(e){return e.$refs.inputRef.contains(document.activeElement)}))||(n.length>0?n[0].$refs.inputRef.focus({preventScroll:!0}):null===(o=t.$refs.searchComponentRef)||void 0===o||o.searchInputRef.focus())}))}},isOutside:function isOutside(){this.enableSpanQuestionShortcutsGlobal&&(this.isOutside?document.addEventListener("keydown",this.keyboardHandler):document.removeEventListener("keydown",this.keyboardHandler))}},computed:{keyboards:function keyboards(){return this.options.reduce((function(e,t,o){return e[t.id]=o+1,e}),{})},filteredOptions:function filteredOptions(){var e=this;return this.options.filter((function(t){return String(t.text).toLowerCase().includes(e.searchInput.toLowerCase())}))},remainingVisibleOptions:function remainingVisibleOptions(){return this.filteredOptions.slice(this.maxVisibleOptions).filter((function(e){return e.isSelected}))},visibleOptions:function visibleOptions(){return this.isExpanded?this.filteredOptions:this.filteredOptions.slice(0,this.maxVisibleOptions).concat(this.remainingVisibleOptions)},maxVisibleOptions:function maxVisibleOptions(){var e;return null!==(e=this.maxOptionsToShowBeforeCollapse)&&void 0!==e?e:this.options.length+1},numberToShowInTheCollapseButton:function numberToShowInTheCollapseButton(){return this.filteredOptions.length-this.visibleOptions.length},showCollapseButton:function showCollapseButton(){return this.filteredOptions.length>this.maxVisibleOptions},showSearch:function showSearch(){return this.options.length>=15||this.showCollapseButton},textToShowInTheCollapseButton:function textToShowInTheCollapseButton(){return this.isExpanded?this.$t("less"):"+".concat(this.numberToShowInTheCollapseButton)},iconToShowInTheCollapseButton:function iconToShowInTheCollapseButton(){return this.isExpanded?"chevron-up":"chevron-down"}},methods:{clickOutside:function clickOutside(){this.isOutside=!0},keyboardHandler:function keyboardHandler(e){var t,o=this;if((this.timer&&clearTimeout(this.timer),!("Tab"===e.key||"Enter"===e.key||"Backspace"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key||"ArrowUp"===e.key||"ArrowDown"===e.key||e.shiftKey||e.ctrlKey||e.metaKey))&&!(document.activeElement===(null===(t=this.$refs.searchComponentRef)||void 0===t?void 0:t.searchInputRef))){var n;if(this.keyCode+=e.key,isNaN(this.keyCode))return null===(n=this.$refs.searchComponentRef)||void 0===n||n.focusInSearch(),this.reset();if(this.hasJustOneCoincidence(this.keyCode))return this.selectByKeyCode(e,this.keyCode);this.timer=setTimeout((function(){o.selectByKeyCode(e,o.keyCode)}),300)}},hasJustOneCoincidence:function hasJustOneCoincidence(e){return 1==this.$refs.options.filter((function(t){return t.$refs.inputRef.dataset.keyboard.startsWith(e)})).length},reset:function reset(){this.keyCode="",this.timer=null},selectByKeyCode:function selectByKeyCode(e,t){var o,n=null===(o=this.$refs.options.find((function(e){return e.$refs.inputRef.dataset.keyboard===t})))||void 0===o?void 0:o.$refs.inputRef;n&&(e.preventDefault(),e.stopPropagation(),n.click()),this.reset()},onSelect:function onSelect(e){var t=e.id,o=e.isSelected;this.options.forEach((function(e){e.isSelected=e.id===t&&o})),o&&this.$emit("on-selected")},toggleShowLess:function toggleShowLess(){this.isExpanded=!this.isExpanded},onFocus:function onFocus(){this.$emit("on-focus")},expandLabelsOnTab:function expandLabelsOnTab(e){this.showCollapseButton&&e===this.maxVisibleOptions-1&&(this.isExpanded=!0)}}},i=(o(919),o(26)),s=Object(i.a)(n,(function render(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"container",on:{keydown:e.keyboardHandler}},[e.showSearch||e.showCollapseButton?t("div",{staticClass:"component-header"},[t("div",{staticClass:"left-header"},[e.showSearch?t("SearchLabelComponent",{ref:"searchComponentRef",attrs:{searchRef:e.searchRef,placeholder:e.$t("spanAnnotation.searchLabels")},model:{value:e.searchInput,callback:function callback(t){e.searchInput=t},expression:"searchInput"}}):e._e()],1),e._v(" "),t("div",{staticClass:"right-header"},[e.showCollapseButton?t("button",{ref:"showLessButtonRef",staticClass:"show-less-button cursor-pointer",attrs:{type:"button"},on:{click:e.toggleShowLess}},[t("span",{class:e.isExpanded?"--less":"--more",domProps:{textContent:e._s(e.textToShowInTheCollapseButton)}}),e._v(" "),t("svgicon",{attrs:{width:"18",height:"18",name:e.iconToShowInTheCollapseButton,"aria-hidden":"true"}})],1):e._e()])]):e._e(),e._v(" "),e.filteredOptions.length?t("transition-group",{key:e.searchInput,ref:"inputsAreaRef",staticClass:"inputs-area",attrs:{css:e.options.length<50,name:"shuffle",role:"group","aria-multiselectable":"multiple","aria-label":"Label-Options"}},e._l(e.visibleOptions,(function(o,n){return t("EntityLabelBadge",{key:o.id,ref:"options",refInFor:!0,attrs:{"visible-shortcuts":e.visibleShortcuts,option:o,keyboards:e.keyboards},on:{keydown:function keydown(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},"on-selected":function onSelected(t){return e.onSelect(o)},"on-expand-labels-on-tab":function onExpandLabelsOnTab(t){return e.expandLabelsOnTab(n)},"on-focus":e.onFocus},model:{value:o.isSelected,callback:function callback(t){e.$set(o,"isSelected",t)},expression:"option.isSelected"}})})),1):e._e(),e._v(" "),e.filteredOptions.length?e._e():t("i",{staticClass:"no-result"})],1)}),[],!1,null,"8534612a",null);t.default=s.exports;installComponents(s,{SearchLabelComponent:o(803).default,EntityLabelBadge:o(898).default})},969:function(e,t,o){o(144).register({"chevron-up":{width:41,height:40,viewBox:"0 0 41 40",data:'<path pid="0" d="M32.5 29l3-3-15-15-15 15 3 3 12-12 12 12z" _fill="#000"/>'}})}}]);