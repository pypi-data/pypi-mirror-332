(window.webpackJsonp=window.webpackJsonp||[]).push([[7,62,127,191],{1009:function(t,e,n){"use strict";n(881)},1015:function(t,e,n){"use strict";n.r(e);var i=n(49),s=(n(41),n(263),{name:"TextAreaComponent",props:{question:{type:Object,required:!0},isFocused:{type:Boolean,default:function _default(){return!1}}},computed:{isSuggested:function isSuggested(){var t;return null===(t=this.question.suggestion)||void 0===t?void 0:t.isSuggested(this.question.answer.value)},suggestedScore:function suggestedScore(){var t;return null===(t=this.question.suggestion)||void 0===t||null===(t=t.score)||void 0===t?void 0:t.toFixed(1)},suggestedAgent:function suggestedAgent(){var t;return null===(t=this.question.suggestion)||void 0===t?void 0:t.agent},tabs:function tabs(){return[{id:"0",name:this.isSuggested?"":this.$nuxt.$t("questions_form.write"),icon:this.isSuggested?"suggestion":"",info:this.isSuggested?this.suggestedScore:"",tooltipTitle:this.isSuggested?this.$nuxt.$t("suggestion.name"):"",tooltipText:this.isSuggested?this.suggestedAgent:"",component:"TextAreaContents"}].concat(Object(i.a)(this.isSuggested?[]:[{id:"1",name:"",icon:"suggestion",info:this.suggestedScore,tooltipTitle:this.$nuxt.$t("suggestion.name"),tooltipText:this.suggestedAgent,component:"TextAreaSuggestion"}]))}}}),o=(n(1009),n(26)),a=Object(o.a)(s,(function render(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("QuestionHeaderComponent",{attrs:{question:t.question}}),t._v(" "),t.question.suggestion?e("BaseCardWithTabs",{attrs:{tabs:t.tabs},scopedSlots:t._u([{key:"default",fn:function fn(n){var i=n.currentComponent;return[e(i,{key:i,tag:"component",attrs:{question:t.question,"is-focused":t.isFocused}})]}}])}):e("TextAreaContents",{attrs:{question:t.question,"is-focused":t.isFocused}})],1)}),[],!1,null,"0552b610",null);e.default=a.exports;installComponents(a,{QuestionHeaderComponent:n(785).default,TextAreaContents:n(988).default,BaseCardWithTabs:n(897).default})},784:function(t,e,n){t.exports={}},785:function(t,e,n){"use strict";n.r(e);n(25),n(35),n(81),n(822),n(824);var i={name:"QuestionHeader",props:{question:{type:Object,required:!0}},data:function data(){return{tooltipMessage:this.question.description,openTooltip:!1,timer:null}},computed:{showIcon:function showIcon(){var t;return!(null===(t=this.question.description)||void 0===t||!t.length)}},watch:{"question.description":function questionDescription(){var t=this;this.timer&&clearTimeout(this.timer),this.openTooltip=!0,this.tooltipMessage=this.question.description,this.timer=setTimeout((function(){t.openTooltip=!1}),2e3)}}},s=(n(836),n(26)),o=Object(s.a)(i,(function render(){var t=this,e=t._self._c;return e("div",{staticClass:"title-area --body1",attrs:{"aria-label":t.question.title}},[e("span",{directives:[{name:"required-field",rawName:"v-required-field",value:{show:t.question.isRequired,color:"#cf3832"},expression:"{ show: question.isRequired, color: '#cf3832' }"}],staticClass:"suggestion-info",domProps:{textContent:t._s(t.question.title)}}),t._v(" "),t.showIcon?e("BaseIconWithBadge",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.tooltipMessage,open:t.openTooltip},expression:"{\n      content: tooltipMessage,\n      open: openTooltip,\n    }"}],staticClass:"icon-info",attrs:{icon:"info",id:"".concat(t.question.id,"QuestionHeader"),"show-badge":!1,iconColor:"#acacac","badge-vertical-position":"top","badge-horizontal-position":"right","badge-border-color":"white",role:"tooltip","aria-label":t.tooltipMessage}}):t._e()],1)}),[],!1,null,"753c5d0d",null);e.default=o.exports;installComponents(o,{BaseIconWithBadge:n(787).default})},786:function(t,e,n){"use strict";n.r(e);n(41),n(24),n(75);var i=n(868),s=n(869),o=n(262),a=n.n(o),r=n(870),u=n(871),c=n.n(u);r.addHook("beforeSanitizeAttributes",(function(t){if(t instanceof SVGElement){var e=t.getAttribute("width"),n=t.getAttribute("height");!t.getAttribute("viewBox")&&e&&n&&t.setAttribute("viewBox","0 0 ".concat(e," ").concat(n))}t instanceof HTMLAnchorElement&&t.setAttribute("target","_blank")})),i.marked.use(c()({throwOnError:!1})),i.marked.use({hooks:{preprocess:function preprocess(t){return t.replace(/[^\S\r\n]+$/gm,"")},postprocess:function postprocess(t){return r.sanitize(t,{ADD_TAGS:["embed","object"],ADD_ATTR:["data","target"],ADD_URI_SAFE_ATTR:["data"]})}}},Object(s.markedHighlight)({langPrefix:"hljs language-",highlight:function highlight(t,e){var n=a.a.getLanguage(e)?e:"plaintext";return a.a.highlight(t,{language:n}).value}}));var d={props:{markdown:{type:String,required:!0}},computed:{classes:function classes(){return this.$language.isRTL(this.markdown)?"--rtl":"--ltr"},markdownToHtml:function markdownToHtml(){return i.marked.parse(this.markdown,{headerIds:!1,mangle:!1,breaks:!0})}}},l=(n(798),n(26)),h=Object(l.a)(d,(function render(){var t=this;return(0,t._self._c)("div",{directives:[{name:"copy-code",rawName:"v-copy-code"}],staticClass:"markdown-render",class:t.classes,domProps:{innerHTML:t._s(t.markdownToHtml)}})}),[],!1,null,"7f5a43aa",null);e.default=h.exports},798:function(t,e,n){"use strict";n(784)},802:function(t,e,n){t.exports={}},817:function(t,e,n){t.exports={}},822:function(t,e,n){n(144).register({info:{width:41,height:40,viewBox:"0 0 41 40",data:'<path pid="0" d="M19 18.47a1.5 1.5 0 113 0v9a1.5 1.5 0 01-3 0v-9zM20.5 11.077a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" _fill="#000"/><path pid="1" fill-rule="evenodd" clip-rule="evenodd" d="M20.5 5c-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15zm-12 15c0 6.627 5.373 12 12 12s12-5.373 12-12-5.373-12-12-12-12 5.373-12 12z" _fill="#000"/>'}})},829:function(t,e,n){t.exports={}},836:function(t,e,n){"use strict";n(802)},854:function(t,e,n){t.exports={}},881:function(t,e,n){t.exports={}},892:function(t,e,n){"use strict";n(817)},897:function(t,e,n){"use strict";n.r(e);n(11),n(60),n(4);var i={name:"BaseCardWithTabs",props:{tabs:{type:Array,required:!0}},data:function data(){return{currentTab:this.tabs[0]}},computed:{currentComponent:function currentComponent(){return this.currentTab.component},tabClass:function tabClass(){var t,e=this;return null===(t=this.tabs.find((function(t){return t.id===e.currentTab.id})))||void 0===t?void 0:t.class}},methods:{changeTab:function changeTab(t){this.currentTab=t}}},s=(n(892),n(26)),o=Object(s.a)(i,(function render(){var t=this,e=t._self._c;return e("div",{class:["card-with-tabs",t.tabClass]},[e("ul",{staticClass:"card-with-tabs__tabs"},t._l(t.tabs,(function(n){return e("li",{key:n.id,staticClass:"card-with-tabs__tab",class:[{"--active":n.id===t.currentTab.id},null==n?void 0:n.class]},[e("BaseTooltip",{attrs:{title:n.tooltipTitle,text:n.tooltipText}},[e("BaseButton",{staticClass:"small",on:{"on-click":function onClick(e){return t.changeTab(n)}}},[t._v("\n          "+t._s(n.name)+"\n          "),n.icon?e("svgicon",{attrs:{name:n.icon,width:"10",height:"10"}}):t._e(),t._v(" "),n.info?e("span",{staticClass:"card-with-tabs__info",domProps:{textContent:t._s(n.info)}}):t._e()],1)],1)],1)})),0),t._v(" "),e("div",{staticClass:"card-with-tabs__content"},[t._t("default",null,{currentComponent:t.currentComponent})],2)])}),[],!1,null,"57d5c157",null);e.default=o.exports;installComponents(o,{BaseButton:n(259).default,BaseTooltip:n(789).default})},916:function(t,e,n){"use strict";n(829)},931:function(t,e,n){"use strict";n.r(e);var i={name:"ContentEditableFeedbackTask",props:{value:{type:String,required:!0},placeholder:{type:String,default:""},originalValue:{type:String,default:""},isFocused:{type:Boolean,default:function _default(){return!1}}},data:function data(){return{sanitizedCurrentValue:null,currentValue:null}},computed:{classes:function classes(){var classes=[];return this.textIsEdited&&classes.push("--edited-text"),this.$language.isRTL(this.value)?classes.push("--rtl"):classes.push("--ltr"),classes},textIsEdited:function textIsEdited(){return this.originalValue!==this.value}},watch:{isFocused:{immediate:!0,handler:function handler(t){var e=this;t&&this.$nextTick((function(){e.$refs.text.focus()}))}},value:function value(){this.value!==this.currentValue&&this.reset()}},mounted:function mounted(){this.reset()},methods:{reset:function reset(){var t=this;this.currentValue=this.value,this.sanitizedCurrentValue=" ",this.$nextTick((function(){t.sanitizedCurrentValue=t.currentValue}))},exitEditionMode:function exitEditionMode(){this.$refs.text.blur(),this.$emit("on-exit-edition-mode")},onInputText:function onInputText(t){this.currentValue=t.target.innerText,this.$emit("change-text",this.currentValue)},setFocus:function setFocus(t){this.$emit("on-change-focus",t)},pastePlainText:function pastePlainText(t){if(t.target.isContentEditable){var e,n;t.preventDefault();var i=null!==(e=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain"))&&void 0!==e?e:"";document.execCommand("insertText",!1,i)}},onClickOutside:function onClickOutside(){this.setFocus(!1)}}},s=(n(916),n(26)),o=Object(s.a)(i,(function render(){var t=this,e=t._self._c;return e("span",[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{events:["mousedown"],handler:t.onClickOutside},expression:"{\n      events: ['mousedown'],\n      handler: onClickOutside,\n    }"}],staticClass:"content__edition-area"},[e("p",{ref:"text",staticClass:"content__text",class:t.classes,attrs:{id:"contentId",contenteditable:!0,placeholder:t.placeholder},domProps:{textContent:t._s(t.sanitizedCurrentValue)},on:{input:t.onInputText,focus:function focus(e){return t.setFocus(!0)},blur:function blur(e){return t.setFocus(!1)},keydown:[function(t){t.stopPropagation()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.exitEditionMode.apply(null,arguments)}],paste:t.pastePlainText}})])])}),[],!1,null,"72ab37d0",null);e.default=o.exports},948:function(t,e,n){"use strict";n(854)},988:function(t,e,n){"use strict";n.r(e);var i={name:"TextAreaComponent",props:{question:{type:Object,required:!0},isFocused:{type:Boolean,default:function _default(){return!1}}},data:function data(){return{isEditionModeActive:!1,isExitedFromEditionModeWithKeyboard:!1}},watch:{isFocused:{immediate:!0,handler:function handler(t){var e=this;!this.question.isRequired||this.question.isAnswered?t&&this.$nextTick((function(){e.onExitEditionMode()})):this.onChangeFocus(t)}}},methods:{onEditMode:function onEditMode(){this.isExitedFromEditionModeWithKeyboard&&(this.isEditionModeActive=!0)},onExitEditionMode:function onExitEditionMode(){this.$refs.container.focus({preventScroll:!0}),this.isEditionModeActive=!1,this.isExitedFromEditionModeWithKeyboard=!0},onChangeTextArea:function onChangeTextArea(t){var e=null==t?void 0:t.length;this.question.answer.value=e?t:"",this.question.isRequired&&this.$emit("on-error",!e)},onChangeFocus:function onChangeFocus(t){this.isEditionModeActive=t,t&&this.$emit("on-focus")},onFocus:function onFocus(t){t.defaultPrevented||(this.isEditionModeActive=!0,this.isExitedFromEditionModeWithKeyboard=!1)}},computed:{classes:function classes(){return this.isEditionModeActive?"--editing":null}}},s=(n(948),n(26)),o=Object(s.a)(i,(function render(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"container",class:t.classes,attrs:{tabindex:t.isEditionModeActive?"-1":"0"},on:{focus:t.onFocus,keydown:function keydown(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?e.ctrlKey||e.altKey||e.metaKey?null:(e.preventDefault(),t.onEditMode.apply(null,arguments)):null}}},[t.question.settings.use_markdown&&!t.isEditionModeActive?e("MarkdownRenderer",{staticClass:"textarea--markdown",attrs:{markdown:t.question.answer.value,role:"textbox"},nativeOn:{click:function click(e){return t.onFocus.apply(null,arguments)}}}):e("ContentEditableFeedbackTask",{staticClass:"textarea",attrs:{value:t.question.answer.value,originalValue:t.question.answer.originalValue,placeholder:t.question.settings.placeholder,isFocused:t.isEditionModeActive,role:"textbox"},on:{"change-text":t.onChangeTextArea,"on-change-focus":t.onChangeFocus,"on-exit-edition-mode":t.onExitEditionMode}})],1)}),[],!1,null,"61f0c33a",null);e.default=o.exports;installComponents(o,{MarkdownRenderer:n(786).default,ContentEditableFeedbackTask:n(931).default})}}]);