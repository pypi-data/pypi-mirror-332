(window.webpackJsonp=window.webpackJsonp||[]).push([[1,38,56,100,113,148,157,182],{1297:function(t,e,o){t.exports={}},1366:function(t,e,o){"use strict";o(1297)},783:function(t,e,o){o(144).register({"chevron-down":{width:41,height:40,viewBox:"0 0 41 40",data:'<path pid="0" d="M8.5 11l-3 3 15 15 15-15-3-3-12 12-12-12z" _fill="#000"/>'}})},787:function(t,e,o){"use strict";o.r(e);var i={props:{url:{type:String},icon:{type:String},iconColor:{type:String,default:function _default(){return"white"}},tooltip:{type:String},showBadge:{type:Boolean,default:!1},badgeVerticalPosition:{type:String},badgeHorizontalPosition:{type:String},badgeBorderColor:{type:String},badgeSize:{type:String,default:"22"}},methods:{onClickIcon:function onClickIcon(){this.$emit("click-icon")}}},n=o(26),s=Object(n.a)(i,(function render(){var t=this,e=t._self._c;return e("BaseButton",{staticClass:"icon-with-badge",attrs:{"data-title":t.tooltip,tabIndex:-1},on:{"on-click":t.onClickIcon}},[e("i",{directives:[{name:"badge",rawName:"v-badge",value:{showBadge:t.showBadge,verticalPosition:t.badgeVerticalPosition,horizontalPosition:t.badgeHorizontalPosition,borderColor:t.badgeBorderColor},expression:"{\n      showBadge: showBadge,\n      verticalPosition: badgeVerticalPosition,\n      horizontalPosition: badgeHorizontalPosition,\n      borderColor: badgeBorderColor,\n    }"}],key:t.showBadge,staticClass:"icon-wrapper"},[e("svgicon",{attrs:{name:t.icon,width:t.badgeSize,height:t.badgeSize,color:t.iconColor,"aria-label":t.icon+" icon"}})],1)])}),[],!1,null,null,null);e.default=s.exports;installComponents(s,{BaseButton:o(259).default})},789:function(t,e,o){"use strict";o.r(e);o(118);var i={data:function data(){return{showTooltip:!1,tooltipPosition:{top:0,left:0}}},props:{title:{type:String},text:{type:String},position:{type:String,default:"top"},offset:{type:Number,default:4},minimalist:{type:Boolean,default:!0}},methods:{show:function show(){this.showTooltip=!0,this.calculateTooltipPosition()},hide:function hide(){this.showTooltip=!1},calculateTooltipPosition:function calculateTooltipPosition(){var t=this.$refs.tooltipWrapper,e=this.$refs.tooltipText,o=t.getBoundingClientRect(),i=e.getBoundingClientRect();switch(this.position){case"top":this.tooltipPosition={top:o.top-i.height-this.offset,left:o.left+o.width/2-i.width/2};break;case"bottom":this.tooltipPosition={top:o.top+o.height,left:o.left+o.width/2-i.width/2};break;case"left":this.tooltipPosition={top:o.top+o.height/2-i.height/2,left:o.left-i.width-this.offset};break;case"right":this.tooltipPosition={top:o.top+o.height/2-i.height/2,left:o.right+this.offset}}}},computed:{positionClass:function positionClass(){return"position-".concat(this.position)}}},n=(o(820),o(26)),s=Object(n.a)(i,(function render(){var t=this,e=t._self._c;return t.title||t.text?e("div",{ref:"tooltipWrapper",staticClass:"tooltip",on:{mouseenter:t.show,mouseleave:t.hide}},[t._t("default"),t._v(" "),e("div",{ref:"tooltipText",class:["tooltip-content",t.positionClass,t.minimalist?"tooltip-content--minimalist":null,t.showTooltip?"tooltip-content--show":"tooltip-content--hide"],style:{top:t.tooltipPosition.top+"px",left:t.tooltipPosition.left+"px"}},[t.title?e("span",{staticClass:"tooltip__title",domProps:{innerHTML:t._s(t.title)}}):t._e(),t.text?e("span",{staticClass:"tooltip__text",domProps:{innerHTML:t._s(t.text)}}):t._e()])],2):e("div",[t._t("default")],2)}),[],!1,null,"e61af414",null);e.default=s.exports},794:function(t,e,o){t.exports={}},801:function(t,e,o){t.exports={}},803:function(t,e,o){"use strict";o.r(e);var i={name:"SearchLabelComponent",props:{value:{type:String,default:function _default(){return""}},searchRef:{type:String,required:!0},placeholder:{type:String,default:function _default(){return""}}},computed:{searchInputRef:function searchInputRef(){return this.$refs[this.searchRef]}},methods:{looseFocus:function looseFocus(){this.searchInputRef.blur()},focusInSearch:function focusInSearch(){this.searchInputRef.focus()},resetValue:function resetValue(){this.value.length&&this.$emit("input","")}}},n=(o(835),o(26)),s=Object(n.a)(i,(function render(){var t=this,e=t._self._c;return e("div",{staticClass:"search-area",attrs:{"aria-label":"Search Labels"},on:{click:t.focusInSearch}},[e("BaseIconWithBadge",{ref:"iconSearchRef",staticClass:"search-area__icon --search",attrs:{icon:"search","show-badge":!1,iconColor:"#acacac","badge-vertical-position":"top","badge-horizontal-position":"right","badge-border-color":"white",tabindex:"-1","aria-hidden":"true"}}),t._v(" "),e("input",{ref:t.searchRef,staticClass:"search-input",attrs:{id:"searchLabel",type:"text",placeholder:t.placeholder,role:"search"},domProps:{value:t.value},on:{input:function input(e){return t.$emit("input",e.target.value)},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-up",void 0,e.key,void 0)?null:(e.preventDefault(),t.looseFocus.apply(null,arguments))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"arrow-down",void 0,e.key,void 0)?null:(e.preventDefault(),t.looseFocus.apply(null,arguments))},function(t){t.stopPropagation()}]}}),t._v(" "),t.value?e("BaseIconWithBadge",{ref:"iconCloseRef",staticClass:"search-area__icon --close",attrs:{icon:"close","show-badge":!1,iconColor:"#acacac","badge-vertical-position":"top","badge-horizontal-position":"right","badge-border-color":"white","aria-hidden":"true"},on:{"click-icon":t.resetValue}}):t._e()],1)}),[],!1,null,"13d36fde",null);e.default=s.exports;installComponents(s,{BaseIconWithBadge:o(787).default})},809:function(t,e,o){"use strict";var i=o(13),n=o(61),s=o(45),a=/"/g,r=i("".replace);t.exports=function(t,e,o,i){var l=s(n(t)),u="<"+e;return""!==o&&(u+=" "+o+'="'+r(s(i),a,"&quot;")+'"'),u+">"+l+"</"+e+">"}},810:function(t,e,o){"use strict";var i=o(14);t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},814:function(t,e,o){"use strict";var i=o(5),n=o(809);i({target:"String",proto:!0,forced:o(810)("fixed")},{fixed:function fixed(){return n(this,"tt","","")}})},820:function(t,e,o){"use strict";o(794)},835:function(t,e,o){"use strict";o(801)},925:function(t,e,o){"use strict";o.r(e);o(41),o(39);var i=o(49),n=(o(34),o(60),o(48),o(171),o(118),o(4),o(53),o(119),o(814),o(32),o(81),o(783),o(969),o(85)),s=function useLabelSelectionViewModel(t){var e=t.componentId,o=Object(n.f)(function getQuestionSetting(t){return window.questionSettings||(window.questionSettings={}),window.questionSettings[t]||(window.questionSettings[t]={isExpandedLabelQuestions:!1}),window.questionSettings[t].isExpandedLabelQuestions}(e));return Object(n.g)(o,(function(t){!function setQuestionSetting(t,e){window.questionSettings[t].isExpandedLabelQuestions=e}(e,t)})),{isExpanded:o}},a={name:"LabelSelectionComponent",props:{maxOptionsToShowBeforeCollapse:{type:Number},options:{type:Array,required:!0},suggestion:{type:Object},componentId:{type:String,required:!0},multiple:{type:Boolean,default:function _default(){return!1}},suggestionFirst:{type:Boolean,default:function _default(){return!1}},isFocused:{type:Boolean,default:function _default(){return!1}},visibleShortcuts:{type:Boolean,default:!0}},model:{prop:"options",event:"on-change"},data:function data(){return{searchInput:"",timer:null,keyCode:""}},created:function created(){this.searchRef="".concat(this.componentId,"SearchFilterRef")},watch:{isFocused:{immediate:!0,handler:function handler(t){var e=this;t&&this.$nextTick((function(){var t,o,i=null===(t=e.$refs)||void 0===t?void 0:t.options;i.some((function(t){return t.contains(document.activeElement)}))||(i.length>0?i[0].focus({preventScroll:!0}):null===(o=e.$refs.searchComponentRef)||void 0===o||o.searchInputRef.focus())}))}}},computed:{keyboards:function keyboards(){return this.options.reduce((function(t,e,o){return t[e.id]=o+1,t}),{})},filteredOptions:function filteredOptions(){var t=this;return this.options.filter((function(e){return String(e.text).toLowerCase().includes(t.searchInput.toLowerCase())}))},visibleOptions:function visibleOptions(){var t=this,e=this.filteredOptions;if(this.suggestionFirst){var o=this.filteredOptions.filter((function(e){return t.suggestion&&t.suggestion.isSuggested(e.value)})).sort((function(e,o){var i=t.suggestion.getSuggestion(e.value),n=t.suggestion.getSuggestion(o.value);return(null==i?void 0:i.score)>(null==n?void 0:n.score)?-1:1})),n=this.filteredOptions.filter((function(e){return!t.suggestion||!t.suggestion.isSuggested(e.value)}));e=[].concat(Object(i.a)(o),Object(i.a)(n))}if(this.isExpanded)return e;var s=e.slice(this.maxVisibleOptions).filter((function(t){return t.isSelected}));return e.slice(0,this.maxVisibleOptions).concat(s)},numberToShowInTheCollapseButton:function numberToShowInTheCollapseButton(){return this.filteredOptions.length-this.visibleOptions.length},showCollapseButton:function showCollapseButton(){return this.filteredOptions.length>this.maxVisibleOptions},showSearch:function showSearch(){return this.options.length>=15||this.showCollapseButton},textToShowInTheCollapseButton:function textToShowInTheCollapseButton(){return this.isExpanded?this.$t("less"):"+".concat(this.numberToShowInTheCollapseButton)},iconToShowInTheCollapseButton:function iconToShowInTheCollapseButton(){return this.isExpanded?"chevron-up":"chevron-down"},maxVisibleOptions:function maxVisibleOptions(){var t;return null!==(t=this.maxOptionsToShowBeforeCollapse)&&void 0!==t?t:this.options.length+1}},methods:{keyboardHandler:function keyboardHandler(t){var e,o=this;if((this.timer&&clearTimeout(this.timer),!("Tab"===t.key||"Enter"===t.key||"Backspace"===t.key||"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||t.shiftKey||t.ctrlKey||t.metaKey))&&!(document.activeElement===(null===(e=this.$refs.searchComponentRef)||void 0===e?void 0:e.searchInputRef))){if("Space"==t.code)return t.preventDefault(),t.stopPropagation(),void document.activeElement.click();var i;if(this.keyCode+=t.key,isNaN(this.keyCode))return null===(i=this.$refs.searchComponentRef)||void 0===i||i.focusInSearch(),this.reset();if(this.hasJustOneCoincidence(this.keyCode))return this.selectByKeyCode(t,this.keyCode);this.timer=setTimeout((function(){o.selectByKeyCode(t,o.keyCode)}),300)}},hasJustOneCoincidence:function hasJustOneCoincidence(t){return 1==this.$refs.options.filter((function(e){return e.dataset.keyboard.startsWith(t)})).length},reset:function reset(){this.keyCode="",this.timer=null},selectByKeyCode:function selectByKeyCode(t,e){var o=this.$refs.options.find((function(t){return t.dataset.keyboard===e}));o&&(t.preventDefault(),o.click()),this.reset()},onSelect:function onSelect(t){var e=t.id,o=t.isSelected;this.multiple||(this.options.forEach((function(t){t.isSelected=t.id===e&&o})),o&&this.$emit("on-selected"))},toggleShowLess:function toggleShowLess(){this.isExpanded=!this.isExpanded},onFocus:function onFocus(){this.$emit("on-focus")},expandLabelsOnTab:function expandLabelsOnTab(t){this.showCollapseButton&&t===this.maxVisibleOptions-1&&(this.isExpanded=!0)},isSuggested:function isSuggested(t){var e;return null===(e=this.suggestion)||void 0===e?void 0:e.isSuggested(t.value)},getSuggestedScore:function getSuggestedScore(t){var e;return null===(e=this.suggestion)||void 0===e||null===(e=e.getSuggestion(t.value))||void 0===e||null===(e=e.score)||void 0===e?void 0:e.fixed},getSuggestedAgent:function getSuggestedAgent(t){var e;return null===(e=this.suggestion)||void 0===e||null===(e=e.getSuggestion(t.value))||void 0===e?void 0:e.agent}},setup:function setup(t){return s(t)}},r=(o(1366),o(26)),l=Object(r.a)(a,(function render(){var t=this,e=t._self._c;return e("div",{staticClass:"container",on:{keydown:t.keyboardHandler}},[t.showSearch||t.showCollapseButton?e("div",{staticClass:"component-header"},[e("div",{staticClass:"left-header"},[t.showSearch?e("SearchLabelComponent",{ref:"searchComponentRef",attrs:{searchRef:t.searchRef,placeholder:t.$t("spanAnnotation.searchLabels")},model:{value:t.searchInput,callback:function callback(e){t.searchInput=e},expression:"searchInput"}}):t._e()],1),t._v(" "),e("div",{staticClass:"right-header"},[t.showCollapseButton?e("button",{ref:"showLessButtonRef",staticClass:"show-less-button cursor-pointer",attrs:{type:"button"},on:{click:t.toggleShowLess}},[e("span",{class:t.isExpanded?"--less":"--more",domProps:{textContent:t._s(t.textToShowInTheCollapseButton)}}),t._v(" "),e("svgicon",{attrs:{width:"18",height:"18",name:t.iconToShowInTheCollapseButton,"aria-hidden":"true"}})],1):t._e()])]):t._e(),t._v(" "),t.filteredOptions.length?e("transition-group",{key:t.searchInput,ref:"inputsAreaRef",staticClass:"inputs-area",attrs:{name:"shuffle",css:t.options.length<50,role:"group","aria-multiselectable":"multiple","aria-label":"Label-Options"}},t._l(t.visibleOptions,(function(o,i){return e("div",{key:o.id,staticClass:"input-button",attrs:{role:"button","aria-label":o.text},on:{keydown:function keydown(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:o.isSelected,expression:"option.isSelected"}],ref:"options",refInFor:!0,attrs:{type:"checkbox",name:o.text,id:o.id,"data-keyboard":t.keyboards[o.id]},domProps:{checked:Array.isArray(o.isSelected)?t._i(o.isSelected,null)>-1:o.isSelected},on:{change:[function(e){var i=o.isSelected,n=e.target,s=!!n.checked;if(Array.isArray(i)){var a=t._i(i,null);n.checked?a<0&&t.$set(o,"isSelected",i.concat([null])):a>-1&&t.$set(o,"isSelected",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(o,"isSelected",s)},function(e){return t.onSelect(o)}],focus:t.onFocus,keydown:function keydown(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.expandLabelsOnTab(i)}}}),t._v(" "),e("BaseTooltip",{attrs:{title:t.isSuggested(o)?t.$t("suggestion.name"):"",text:t.getSuggestedAgent(o),minimalist:""}},[e("label",{staticClass:"label-text",class:{"label-active":o.isSelected,square:t.multiple,round:!t.multiple},attrs:{for:o.id,title:o.text}},[t.visibleShortcuts?e("span",{staticClass:"key",domProps:{textContent:t._s(t.keyboards[o.id])}}):t._e(),t._v(" "),e("span",{staticClass:"label-text__text"},[t._v(t._s(o.text))]),t._v(" "),t.isSuggested(o)?e("span",{staticClass:"label-text__suggestion"},[e("svgicon",{staticClass:"label-text__suggestion__icon",attrs:{name:"suggestion"}}),t._v(" "),t.getSuggestedScore(o)?e("span",{staticClass:"label-text__suggestion__score",domProps:{textContent:t._s(t.getSuggestedScore(o))}}):t._e()],1):t._e()])])],1)})),0):t._e(),t._v(" "),t.filteredOptions.length?t._e():e("i",{staticClass:"no-result"})],1)}),[],!1,null,"13603169",null);e.default=l.exports;installComponents(l,{SearchLabelComponent:o(803).default,BaseTooltip:o(789).default})},969:function(t,e,o){o(144).register({"chevron-up":{width:41,height:40,viewBox:"0 0 41 40",data:'<path pid="0" d="M32.5 29l3-3-15-15-15 15 3 3 12-12 12 12z" _fill="#000"/>'}})}}]);